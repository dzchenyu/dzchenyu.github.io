<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>python爬虫 | Dzchen博客</title><meta name="author" content="Dzchen"><meta name="copyright" content="Dzchen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="python面向对象（oop）类：共同特征1234class 类名：	特征	pass  1.类属性定义在类里面的变量  公有属性：直接定义在类里面的变量 私有属性：双下划线开头的变量  1234567class Cat:	leg&#x3D;45	tail&#x3D;1	eye&#x3D;2	__abc&#x3D;1000print(Cat.leg)print(Cat.__abc)#私有属性，外部访问不了  方法：定义在类里面的函数123">
<meta property="og:type" content="article">
<meta property="og:title" content="python爬虫">
<meta property="og:url" content="https://dzchenyu.github.io/2025/07/19/python%E7%88%AC%E8%99%AB/index.html">
<meta property="og:site_name" content="Dzchen博客">
<meta property="og:description" content="python面向对象（oop）类：共同特征1234class 类名：	特征	pass  1.类属性定义在类里面的变量  公有属性：直接定义在类里面的变量 私有属性：双下划线开头的变量  1234567class Cat:	leg&#x3D;45	tail&#x3D;1	eye&#x3D;2	__abc&#x3D;1000print(Cat.leg)print(Cat.__abc)#私有属性，外部访问不了  方法：定义在类里面的函数123">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2025-07-19T07:05:11.794Z">
<meta property="article:modified_time" content="2025-07-19T07:09:41.425Z">
<meta property="article:author" content="Dzchen">
<meta property="article:tag" content="Dzchen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://dzchenyu.github.io/2025/07/19/python%E7%88%AC%E8%99%AB/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'python爬虫',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-19 15:09:41'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://avatars.githubusercontent.com/u/119387945?s=400&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Dzchen博客"><span class="site-name">Dzchen博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">python爬虫</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-19T07:05:11.794Z" title="发表于 2025-07-19 15:05:11">2025-07-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-19T07:09:41.425Z" title="更新于 2025-07-19 15:09:41">2025-07-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="python爬虫"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="python面向对象（oop）"><a href="#python面向对象（oop）" class="headerlink" title="python面向对象（oop）"></a>python面向对象（oop）</h1><h3 id="类：共同特征"><a href="#类：共同特征" class="headerlink" title="类：共同特征"></a>类：共同特征</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">类名</span>：</span><br><span class="line">	特征</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="1-类属性"><a href="#1-类属性" class="headerlink" title="1.类属性"></a>1.类属性</h4><p>定义在类里面的变量</p>
<ul>
<li>公有属性：直接定义在类里面的变量</li>
<li>私有属性：双下划线开头的变量</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Cat:</span><br><span class="line">	leg=45</span><br><span class="line">	tail=1</span><br><span class="line">	eye=2</span><br><span class="line">	__abc=1000</span><br><span class="line">print(Cat.leg)</span><br><span class="line">print(Cat.__abc)#私有属性，外部访问不了</span><br></pre></td></tr></table></figure>

<h5 id="方法：定义在类里面的函数"><a href="#方法：定义在类里面的函数" class="headerlink" title="方法：定义在类里面的函数"></a>方法：定义在类里面的函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Cat:</span><br><span class="line">	leg=4</span><br><span class="line">	tail=1</span><br><span class="line">	eye=2</span><br><span class="line">	__abc=1000</span><br><span class="line">	def jineng1(self):</span><br><span class="line">		print(...)</span><br><span class="line">	def jineng2(self):</span><br><span class="line">		print(...)</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<blockquote>
<h5 id="1-类方法"><a href="#1-类方法" class="headerlink" title="1.类方法"></a>1.类方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">class</span> <span class="title class_">Cat</span>:</span><br><span class="line">leg=<span class="number">4</span></span><br><span class="line">tail=<span class="number">1</span></span><br><span class="line">eye=<span class="number">2</span></span><br><span class="line">__abc=<span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@classmethod </span><span class="comment">#必须要加的</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_abc</span>(<span class="params">cls</span>): cls：参数</span><br><span class="line">	<span class="built_in">print</span>(cls.__abc)</span><br><span class="line">&gt;<span class="built_in">print</span>(Cat.leg)</span><br><span class="line">&gt;<span class="built_in">print</span>(Cat.__abc)<span class="comment">#无法直接打印 为私有属性</span></span><br><span class="line">&gt;Cat.print_abc()<span class="comment">#借助方法可以进行打印</span></span><br></pre></td></tr></table></figure>

<ul>
<li>必须定义一个参数 ，必须要加@classmethod进行声明</li>
</ul>
<h5 id="2-静态方法"><a href="#2-静态方法" class="headerlink" title="2.静态方法"></a>2.静态方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">class</span> <span class="title class_">Cat</span>:</span><br><span class="line">leg=<span class="number">4</span></span><br><span class="line">tail=<span class="number">1</span></span><br><span class="line">eye=<span class="number">2</span></span><br><span class="line">__abc=<span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@staticmethod </span><span class="comment">#必须要加的</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_abc</span>():</span><br><span class="line">	<span class="built_in">print</span>(Cat.__abc)</span><br></pre></td></tr></table></figure>

<ul>
<li>无需定义参数，但需要@staticmethod声明</li>
<li>封装与当前类无关的功能函数</li>
</ul>
</blockquote>
<h3 id="对象："><a href="#对象：" class="headerlink" title="对象："></a>对象：</h3><h4 id="对象是通过类创建出来"><a href="#对象是通过类创建出来" class="headerlink" title="对象是通过类创建出来"></a>对象是通过类创建出来</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="string">&quot;abc&quot;</span> <span class="comment">#s为str类的对象</span></span><br><span class="line">b=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">#b为list类的对象</span></span><br></pre></td></tr></table></figure>

<h5 id="自定义创建方法"><a href="#自定义创建方法" class="headerlink" title="自定义创建方法"></a>自定义创建方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>:</span><br><span class="line">	leg=<span class="number">4</span></span><br><span class="line">	tail=<span class="number">1</span></span><br><span class="line">	eye=<span class="number">2</span></span><br><span class="line">	__abc=<span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	@classmethod</span></span><br><span class="line">	<span class="keyword">def</span>	<span class="title function_">f</span>(<span class="params">cls</span>):</span><br><span class="line">		<span class="built_in">print</span>(Cat.__abc)</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">	@staticmethod</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;world&quot;</span>)</span><br><span class="line"></span><br><span class="line">dd=Cat()<span class="comment">#创建dd为Cat类的对象</span></span><br><span class="line"><span class="built_in">print</span>(dd.leg,dd.eye)</span><br><span class="line">dd.f()</span><br><span class="line">dd.f1()</span><br></pre></td></tr></table></figure>

<h4 id="对象方法"><a href="#对象方法" class="headerlink" title="对象方法"></a>对象方法</h4><p>仅能对象进行调用，类调用不了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">animal</span>:</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;yooooo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hhhhhh&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self&#125;</span>mommm&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;woof&quot;</span>)</span><br><span class="line"></span><br><span class="line">cow=animal()</span><br><span class="line">fox=animal()</span><br><span class="line">animal.ff()</span><br><span class="line">animal.ff1()</span><br><span class="line">cow.f1()</span><br><span class="line">cow.ff1()</span><br><span class="line">fox.f()</span><br><span class="line"><span class="comment">#fox.ff()  对象可直接调用类方法</span></span><br><span class="line"><span class="comment">#animal.f() 类不可直接调用对象方法</span></span><br></pre></td></tr></table></figure>

<h4 id="对象属性"><a href="#对象属性" class="headerlink" title="对象属性"></a>对象属性</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对象.属性名=属性值</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class animal:</span><br><span class="line">    @classmethod</span><br><span class="line">    def ff(cls):</span><br><span class="line">        print(&quot;yooooo&quot;)</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def ff1():</span><br><span class="line">        print(&quot;hhhhhh&quot;)</span><br><span class="line"></span><br><span class="line">    def f(self):</span><br><span class="line">        print(f&quot;&#123;self&#125;mommm&quot;)</span><br><span class="line"></span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&quot;woof&quot;)</span><br><span class="line">        </span><br><span class="line">#创建了一个对象</span><br><span class="line">cow=animal()</span><br><span class="line">#添加属性</span><br><span class="line">cow.name=&quot;niu&quot;</span><br><span class="line">cow.age=&quot;18&quot;</span><br></pre></td></tr></table></figure>

<h5 id="对象属性的访问"><a href="#对象属性的访问" class="headerlink" title="对象属性的访问"></a>对象属性的访问</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">animal</span>:</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;yooooo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hhhhhh&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,<span class="string">&quot;mommm&quot;</span>)<span class="comment">#访问</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.age,<span class="string">&quot;woof&quot;</span>)<span class="comment">#访问</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建了一个对象</span></span><br><span class="line">cow=animal()</span><br><span class="line"><span class="comment">#添加属性</span></span><br><span class="line">cow.name=<span class="string">&quot;niu&quot;</span></span><br><span class="line">cow.age=<span class="string">&quot;18&quot;</span></span><br><span class="line">cow.f()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="对象初始化方法"><a href="#对象初始化方法" class="headerlink" title="对象初始化方法"></a>对象初始化方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#__init__:创建对象的时候，给对象设置初始的属性</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">stu</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,number</span>):	</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">        self.number=number</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,<span class="string">&quot;okkk&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,<span class="string">&quot;are you ok&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hhhh&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;heihei&quot;</span>)</span><br><span class="line"></span><br><span class="line">chen=stu(<span class="string">&#x27;chen&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;25&#x27;</span>)<span class="comment">#自动调用init 放入初始值</span></span><br><span class="line">chen.f()</span><br><span class="line">chen.f1()</span><br><span class="line"><span class="built_in">print</span>(chen.name)</span><br></pre></td></tr></table></figure>

<h3 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h3><blockquote>
<p>父类：被继承</p>
<p>子类：继承</p>
</blockquote>
<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>子类通过继承可以获得父类所有属性和方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#学生的基本信息</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">stu</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,number</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">        self.number=number</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,<span class="string">&quot;okkk&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,<span class="string">&quot;are you ok&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hhhh&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;heihei&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#chen继承了stu 在原本的基础上添加(类似追加写)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">chen</span>(<span class="title class_ inherited__">stu</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">d</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;good&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">d1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;bulai&quot;</span>)</span><br><span class="line">        </span><br><span class="line">p=chen(<span class="string">&#x27;xu&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;25&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p.name)</span><br><span class="line">p.ff()</span><br><span class="line">p.d()</span><br></pre></td></tr></table></figure>

<p>可以一直继承，前提是知道最后的一个子类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">xu</span>(<span class="title class_ inherited__">chen</span>)：</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">dd</span>(<span class="params">self</span>):</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;pretty&quot;</span>)</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h4 id="重写父类的方法"><a href="#重写父类的方法" class="headerlink" title="重写父类的方法"></a>重写父类的方法</h4><p>重写：重新定义，再添加新功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#学生的基本信息</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">stu</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,number</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">        self.number=number</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,<span class="string">&quot;okkk&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,<span class="string">&quot;are you ok&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hhhh&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ff1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;heihei&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#chen同学继承同学的基本 在原本的基础上添加(类似追加写)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">chen</span>(<span class="title class_ inherited__">stu</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">d</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;good&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">d1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;bulai&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">xu</span>(<span class="title class_ inherited__">chen</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, number,hight</span>):<span class="comment">#重写先定义原本的方法，后面再添加</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(name, age, number)<span class="comment">#先引用，再重写</span></span><br><span class="line">        self.hight=hight</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">d1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().d1()<span class="comment">#引用过来，再添加</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;laibu&quot;</span>)</span><br><span class="line">p=xu(<span class="string">&#x27;xu&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;25&#x27;</span>,<span class="string">&#x27;180&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p.hight)</span><br><span class="line">p.d1()</span><br></pre></td></tr></table></figure>

<h4 id="object"><a href="#object" class="headerlink" title="object"></a>object</h4><ul>
<li><p>所有类的中的最高父类</p>
</li>
<li><p>若无继承任何类，默认继承object</p>
</li>
</ul>
<h3 id="封装学生信息管理系统"><a href="#封装学生信息管理系统" class="headerlink" title="封装学生信息管理系统"></a>封装学生信息管理系统</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">studentdata</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span><span class="comment">#静态方法 无参数仅有输出</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">zhu</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;==================&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;  1.查询学生信息&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;  2.删除学生信息&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;  3.加入学生信息&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;  4.修改学生信息&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;  5.退出学生系统&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;==================&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.stu=&#123;&#125;</span><br><span class="line">        self.load_data()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">chaxun</span>(<span class="params">self</span>):</span><br><span class="line">        name=<span class="built_in">input</span>(<span class="string">&quot;请输入姓名加学号:&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> name <span class="keyword">in</span> self.stu:</span><br><span class="line">            a=<span class="built_in">list</span>(self.stu[name])</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;年龄为:&quot;</span>,a[<span class="number">0</span>],<span class="string">&quot;年级为:&quot;</span>,a[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;未查询到相关信息\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">shanchu</span>(<span class="params">self</span>):</span><br><span class="line">        name=<span class="built_in">input</span>(<span class="string">&quot;请输入需要删除的姓名加学号:&quot;</span>)</span><br><span class="line">        self.stu.pop(name)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">jiaru</span>(<span class="params">self</span>):</span><br><span class="line">        name=<span class="built_in">input</span>(<span class="string">&quot;请输入姓名加学号:&quot;</span>)</span><br><span class="line">        age=<span class="built_in">input</span>(<span class="string">&quot;请输入年龄:&quot;</span>)</span><br><span class="line">        grade=<span class="built_in">input</span>(<span class="string">&quot;请输入年级:&quot;</span>)</span><br><span class="line">        self.stu[name]=age,grade</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">xiugai</span>(<span class="params">self</span>):</span><br><span class="line">        self.jiaru()<span class="comment">#通过self进行调用处理</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;欢迎使用学生信息管理系统1.0&quot;</span>)</span><br><span class="line">        self.zhu()</span><br><span class="line">        n = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入号码:&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> n <span class="keyword">not</span> <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请再次输入&quot;</span>)</span><br><span class="line">        <span class="keyword">while</span> n != <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">                self.chaxun()</span><br><span class="line">            <span class="keyword">elif</span> n == <span class="number">2</span>:</span><br><span class="line">                self.shanchu()</span><br><span class="line">            <span class="keyword">elif</span> n == <span class="number">3</span>:</span><br><span class="line">                self.jiaru()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.xiugai()</span><br><span class="line">            self.save_data()</span><br><span class="line">            self.zhu()</span><br><span class="line">            n = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入号码:&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#打开数据，保存在字典中</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">try</span>:<span class="comment">#异常处理</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.json&quot;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:<span class="comment">#实现自动关闭的效果</span></span><br><span class="line">                self.stu=json.load(f)</span><br><span class="line">        <span class="keyword">except</span> FileNotFoundError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#保存数据存在json文件中，覆盖写</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.json&quot;</span>,<span class="string">&quot;w&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json.dump(self.stu,f,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">student=studentdata()</span><br><span class="line">student.main()</span><br></pre></td></tr></table></figure>

<h1 id="其他知识点"><a href="#其他知识点" class="headerlink" title="其他知识点"></a>其他知识点</h1><h3 id="文件路径管理"><a href="#文件路径管理" class="headerlink" title="文件路径管理"></a>文件路径管理</h3><blockquote>
<p>相对路径</p>
<ul>
<li>相对于当前工作目录的路径</li>
</ul>
<p>绝对路径</p>
<ul>
<li>从根目录开始的完整路径</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">. :表示当前目录</span><br><span class="line">.. :表示上一级目录（父目录）</span><br><span class="line"><span class="comment">#相对路径</span></span><br><span class="line"><span class="comment">#当abc.txt与程序在同一文件夹中</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;abc.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    c=f.read()</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br><span class="line"><span class="comment">#不在同一文件夹</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;../std/abc.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    c=f.read()</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#绝对路径</span></span><br><span class="line"><span class="comment">#复制过来为&quot;\&quot;记得换为&quot;/&quot; 或在前加个&quot;r&quot;进行转义</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&quot;C:\Users\lenovo\Desktop\py\pachou\abc.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    c=f.read()</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;C:/Users/lenovo/Desktop/py/pachou/abc.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    c=f.read()</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="os模块的使用"><a href="#os模块的使用" class="headerlink" title="os模块的使用"></a>os模块的使用</h5></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment">#获取当前工作路径</span></span><br><span class="line"></span><br><span class="line">res=os.getcwd()</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line">name=<span class="string">&#x27;abc.txt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#拼接路径</span></span><br><span class="line">filework=os.path.join(res,name)</span><br><span class="line"><span class="built_in">print</span>(filework)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取当前工作路径下的所有文件</span></span><br><span class="line">file=os.listdir(res)</span><br><span class="line"><span class="built_in">print</span>(file)</span><br><span class="line"></span><br><span class="line"><span class="comment">#遍历打印当前目录下所有的路径</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> file:</span><br><span class="line">    a=os.path.join(res,i)</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="pathlib模块"><a href="#pathlib模块" class="headerlink" title="pathlib模块"></a>pathlib模块</h5></li>
</ul>
<h3 id="模块和包管理"><a href="#模块和包管理" class="headerlink" title="模块和包管理"></a>模块和包管理</h3><h4 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h4><blockquote>
<p>python文件本身就是一个python模块</p>
</blockquote>
<h4 id="包"><a href="#包" class="headerlink" title="包"></a>包</h4><blockquote>
<p>包含多个python 模块的文件夹，文件夹包含一个初始化文件</p>
</blockquote>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240904153446810.png" class title="image-20240904153446810">

<h3 id="迭代器和生成器"><a href="#迭代器和生成器" class="headerlink" title="迭代器和生成器"></a>迭代器和生成器</h3><h4 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h4><blockquote>
<p>可迭代对象</p>
<ul>
<li><p>能用for循环进行遍历的对象即为可迭代对象</p>
</li>
<li><p>可迭代对象能使用内置函数iter转换为迭代器</p>
</li>
</ul>
</blockquote>
<ul>
<li>迭代器支持使用内置函数next,逐个迭代数据</li>
<li>当迭代器中的所有数据均被迭代出去后，再次使用next进行迭代就会出现迭代器停止的错误</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">li=[1,2,3,4]</span><br><span class="line">a=iter(li)</span><br><span class="line">print(next(a))</span><br><span class="line">print(next(a))</span><br><span class="line">print(next(a))</span><br><span class="line">print(next(a))</span><br><span class="line">print(next(a))</span><br></pre></td></tr></table></figure>

<h4 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h4><blockquote>
<ul>
<li>特殊的迭代器，更节约内存</li>
<li>生成器内部不会一次性创建好所有数据，通过next去生成时，才会创建一条</li>
<li>生成器可以有效地处理大数据集，因为它们在需要时生成值，而不是一次性将所有数据加载到内存中。</li>
</ul>
</blockquote>
<h5 id="生成器表达式定义"><a href="#生成器表达式定义" class="headerlink" title="生成器表达式定义"></a>生成器表达式定义</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=(i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">100</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<h5 id="生成器函数创建生成器（yield）"><a href="#生成器函数创建生成器（yield）" class="headerlink" title="生成器函数创建生成器（yield）"></a>生成器函数创建生成器（yield）</h5><ul>
<li><p>使用关键字yield后，则该函数即变为生成器函数</p>
</li>
<li><p>使用next进行生成，执行到第一个yield，并把yield后面的值，作为生成的数据返回出来</p>
</li>
<li><p>当再次next去生成数据时，会从上次暂停位置往下执行</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    yiled <span class="number">999</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">888</span></span><br><span class="line">ans=f()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ans)</span><br><span class="line">&lt;generator <span class="built_in">object</span> f at <span class="number">0x000001CDE6244AC0</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(ans))</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">999</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(ans))</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">888</span></span><br></pre></td></tr></table></figure>

<h5 id="生成器内部的数据交互"><a href="#生成器内部的数据交互" class="headerlink" title="生成器内部的数据交互"></a>生成器内部的数据交互</h5><p>注意：</p>
<ul>
<li>每次使用send时需要先用next执行生成器先</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">    s=<span class="keyword">yield</span> <span class="number">99</span> </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;s:&quot;</span>,s)</span><br><span class="line">        s=<span class="keyword">yield</span> i</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">ans=f()<span class="comment">#调用生成器</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(ans))<span class="comment">#执行生成器，到第一个yield为止</span></span><br><span class="line"><span class="comment">#99</span></span><br><span class="line">ans.send(<span class="number">1</span>)<span class="comment">#继续执行，给s赋值为1，返回0</span></span><br></pre></td></tr></table></figure>



<h3 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#一维数组</span></span><br><span class="line">a=[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>)]<span class="comment">#[0,1,2,3,4....]</span></span><br><span class="line"><span class="comment">#二维数组的创立</span></span><br><span class="line">a=[[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>)]<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>)]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>



<h1 id="python爬虫"><a href="#python爬虫" class="headerlink" title="python爬虫"></a>python爬虫</h1><h3 id="爬虫工作流程"><a href="#爬虫工作流程" class="headerlink" title="爬虫工作流程"></a>爬虫工作流程</h3><ul>
<li><p><strong>打开网页</strong>，发送HTTP请求到网站</p>
</li>
<li><p><strong>获取内容</strong></p>
</li>
<li><p><strong>解析内容</strong>，提取需要的信息</p>
</li>
<li><p><strong>存储数据</strong></p>
</li>
</ul>
<h4 id="robots协议"><a href="#robots协议" class="headerlink" title="robots协议"></a>robots协议</h4><ul>
<li><h5 id="User-agent-指定爬虫名称或标识符"><a href="#User-agent-指定爬虫名称或标识符" class="headerlink" title="User-agent:指定爬虫名称或标识符"></a>User-agent:指定爬虫名称或标识符</h5></li>
<li><h5 id="DIsallow-指定不允许访问的URL路径"><a href="#DIsallow-指定不允许访问的URL路径" class="headerlink" title="DIsallow:指定不允许访问的URL路径"></a>DIsallow:指定不允许访问的URL路径</h5></li>
<li><p>不要采集到涉及用户隐私的数据</p>
</li>
</ul>
<style>.hlhqyhmsofrk{zoom:67%;}</style><img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240905101315015.png" class="hlhqyhmsofrk" alt="image-20240905101315015">

<h3 id="HTTP和HTTPS协议"><a href="#HTTP和HTTPS协议" class="headerlink" title="HTTP和HTTPS协议"></a>HTTP和HTTPS协议</h3><ul>
<li><h5 id="HTTP-发布和接受html页面的方法"><a href="#HTTP-发布和接受html页面的方法" class="headerlink" title="HTTP:发布和接受html页面的方法"></a>HTTP:发布和接受html页面的方法</h5></li>
<li><h5 id="HTTPS-更安全的HTTP，在HTTP中加入SSL层。主要用于web的安全传输协议，在传输层对网络连接加密"><a href="#HTTPS-更安全的HTTP，在HTTP中加入SSL层。主要用于web的安全传输协议，在传输层对网络连接加密" class="headerlink" title="HTTPS:更安全的HTTP，在HTTP中加入SSL层。主要用于web的安全传输协议，在传输层对网络连接加密"></a>HTTPS:更安全的HTTP，在HTTP中加入SSL层。主要用于web的安全传输协议，在传输层对网络连接加密</h5></li>
<li><p>HTTP端口：80</p>
</li>
<li><p>HTTPS端口：443</p>
</li>
</ul>
<h4 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">GET /path/to/resource HTTP/<span class="number">1.1</span></span><br><span class="line"></span><br><span class="line">Host: www.example.com</span><br><span class="line"></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) </span><br><span class="line"></span><br><span class="line">Chrome/<span class="number">91.0</span><span class="number">.4472</span><span class="number">.124</span> Safari/<span class="number">537.36</span></span><br><span class="line"></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/webp,image/apng,*/*;q=<span class="number">0.8</span></span><br><span class="line"></span><br><span class="line">Accept-Language: en-US,en;q=<span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line"></span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">Referer: https://www.example.com/previous-page</span><br><span class="line"></span><br><span class="line">Cookie: sessionId=abc123; userId=789xyz</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="GET：从服务器上获取数据，GET请求参数显示，均显示在网址上。例如豆瓣电影-Top-250-douban-com"><a href="#GET：从服务器上获取数据，GET请求参数显示，均显示在网址上。例如豆瓣电影-Top-250-douban-com" class="headerlink" title="GET：从服务器上获取数据，GET请求参数显示，均显示在网址上。例如豆瓣电影 Top 250 (douban.com)"></a>GET：从服务器上获取数据，GET请求参数显示，均显示在网址上。例如<a target="_blank" rel="noopener" href="https://movie.douban.com/top250?start=0&filter=">豆瓣电影 Top 250 (douban.com)</a></h5></li>
<li><h5 id="POST：向服务器提交数据，POST请求参数在请求体中，以隐性的方式进行发送"><a href="#POST：向服务器提交数据，POST请求参数在请求体中，以隐性的方式进行发送" class="headerlink" title="POST：向服务器提交数据，POST请求参数在请求体中，以隐性的方式进行发送"></a>POST：向服务器提交数据，POST请求参数在请求体中，以隐性的方式进行发送</h5></li>
</ul>
<h5 id="常用请求头-用于反爬"><a href="#常用请求头-用于反爬" class="headerlink" title="常用请求头(用于反爬)"></a>常用请求头(用于反爬)</h5><ul>
<li><h5 id="User-Agent：模拟浏览器访问"><a href="#User-Agent：模拟浏览器访问" class="headerlink" title="User-Agent：模拟浏览器访问"></a>User-Agent：模拟浏览器访问</h5></li>
<li><h5 id="Referer：表明当前请求从哪个页面跳转"><a href="#Referer：表明当前请求从哪个页面跳转" class="headerlink" title="Referer：表明当前请求从哪个页面跳转"></a>Referer：表明当前请求从哪个页面跳转</h5></li>
<li><h5 id="cookie-保持登陆状态或跟踪用户"><a href="#cookie-保持登陆状态或跟踪用户" class="headerlink" title="cookie:保持登陆状态或跟踪用户"></a>cookie:保持登陆状态或跟踪用户</h5></li>
</ul>
<h5 id="http响应状态码"><a href="#http响应状态码" class="headerlink" title="http响应状态码"></a>http响应状态码</h5><ul>
<li><h5 id="200：成功"><a href="#200：成功" class="headerlink" title="200：成功"></a>200：成功</h5></li>
<li><h5 id="302，307：临时转移至新的url"><a href="#302，307：临时转移至新的url" class="headerlink" title="302，307：临时转移至新的url"></a>302，307：临时转移至新的url</h5></li>
<li><h5 id="404-找不到该页面"><a href="#404-找不到该页面" class="headerlink" title="404:找不到该页面"></a>404:找不到该页面</h5></li>
<li><h5 id="500：服务器内部出错"><a href="#500：服务器内部出错" class="headerlink" title="500：服务器内部出错"></a>500：服务器内部出错</h5></li>
<li><h5 id="503：服务不可用，被反爬"><a href="#503：服务不可用，被反爬" class="headerlink" title="503：服务不可用，被反爬"></a>503：服务不可用，被反爬</h5></li>
</ul>
<h5 id="cookie信息"><a href="#cookie信息" class="headerlink" title="cookie信息"></a>cookie信息</h5><ul>
<li><h5 id="set-cookie-对方服务器设置cookie到用户浏览器的缓存"><a href="#set-cookie-对方服务器设置cookie到用户浏览器的缓存" class="headerlink" title="set-cookie(对方服务器设置cookie到用户浏览器的缓存)"></a>set-cookie(对方服务器设置cookie到用户浏览器的缓存)</h5></li>
<li><h5 id="cookie-客户端记录信息-确定用户身份"><a href="#cookie-客户端记录信息-确定用户身份" class="headerlink" title="cookie 客户端记录信息 确定用户身份"></a>cookie 客户端记录信息 确定用户身份</h5></li>
<li><h5 id="session-服务端记录记录-确定用户身份"><a href="#session-服务端记录记录-确定用户身份" class="headerlink" title="session 服务端记录记录 确定用户身份"></a>session 服务端记录记录 确定用户身份</h5></li>
</ul>
<h3 id="requests使用"><a href="#requests使用" class="headerlink" title="requests使用"></a>requests使用</h3><blockquote>
<p>获取到的text()为页面源代码</p>
</blockquote>
<h4 id="1-发送get请求"><a href="#1-发送get请求" class="headerlink" title="1.发送get请求"></a>1.发送get请求</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url=<span class="string">&quot;https://movie.douban.com/top250&quot;</span> <span class="comment">#网站</span></span><br><span class="line">head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125; <span class="comment">#请求头，伪装为浏览器访问</span></span><br><span class="line">a=requests.get(url,headers=head) <span class="comment">#发送get请求</span></span><br><span class="line"><span class="comment">#response.text :获取到字符串str类型</span></span><br><span class="line"><span class="built_in">print</span>(a.text)</span><br><span class="line"></span><br><span class="line"><span class="comment">#response.content :获取原始的二进制数据(bytes类型的数据)</span></span><br><span class="line"><span class="built_in">print</span>(a.content)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>str,bytes为python中两种字符串类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="string">&#x27;abc&#x27;</span> <span class="comment">#str形式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(s))</span><br><span class="line">a=s.encode()<span class="comment">#str转化为bytes 编码</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))</span><br><span class="line"></span><br><span class="line">b=<span class="string">b&#x27;abc&#x27;</span><span class="comment">#bytes形式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(b))</span><br><span class="line">c=b.decode()<span class="comment">#bytes转化为str 解码</span></span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(c))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>encode 编码 a.encode() 转化为二进制格式</p>
<p>decode 解码 a.decode(“utf-8”)  解码为想要的</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(a.text)</span><br><span class="line">print(a.content.decode())#不容易出现乱码的情况 &quot;utf-8&quot; &quot;GBK&quot; </span><br></pre></td></tr></table></figure>



<h3 id="实例：图片下载"><a href="#实例：图片下载" class="headerlink" title="实例：图片下载"></a>实例：图片下载</h3><blockquote>
<p>图片和音频或视频文件内部本就为二进制文件，所以不必解码，直接放入文件</p>
</blockquote>
<ul>
<li><h5 id="把图片保存到本地"><a href="#把图片保存到本地" class="headerlink" title="把图片保存到本地"></a>把图片保存到本地</h5></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可直接下载</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url=<span class="string">&quot;https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png&quot;</span></span><br><span class="line">head=&#123;<span class="string">&quot;user-agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line">img=requests.get(url,headers=head)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;baidu.jpg&quot;</span>,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(img.content)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#当当前的图片格式不为jpg无法显示时</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line">url =<span class="string">&quot;https://img3.doubanio.com/view/photo/s_ratio_poster/public/p480747492.webp&quot;</span></span><br><span class="line">head = &#123;<span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0&quot;</span>&#125;</span><br><span class="line">response = requests.get(url, headers=head)</span><br><span class="line">img = Image.<span class="built_in">open</span>(BytesIO(response.content))</span><br><span class="line"><span class="comment">#BytesIO(response.content) 将这些字节数据转换为一个内存中的文件对象。</span></span><br><span class="line"><span class="comment">#Image.open 使用这个对象来读取和处理图像数据。</span></span><br><span class="line">img.save(<span class="string">&quot;douban.jpg&quot;</span>, <span class="string">&quot;JPEG&quot;</span>) <span class="comment">#名字 ，格式 JPGE</span></span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="音乐获取"><a href="#音乐获取" class="headerlink" title="音乐获取"></a>音乐获取</h5></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url=<span class="string">&quot;https://m701.music.126.net/20240905144916/c735e58e81b2177d5ddbc3d0a96f5673/jdyyaac/obj/w5rDlsOJwrLDjj7CmsOj/16689242483/c26c/46eb/99b7/659b19e38799dae93f2514dd8b27b6b3.m4a&quot;</span></span><br><span class="line">head=&#123;<span class="string">&quot;user-agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line">img=requests.get(url,headers=head)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;baidu.mp4&quot;</span>,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(img.content)</span><br></pre></td></tr></table></figure>



<h3 id="数据提取Xpath"><a href="#数据提取Xpath" class="headerlink" title="数据提取Xpath"></a>数据提取Xpath</h3><blockquote>
<p>以精确地选择和操作 HTML 或 XML 文档中的特定节点或数据。</p>
</blockquote>
<h4 id="选取节点"><a href="#选取节点" class="headerlink" title="选取节点"></a>选取节点</h4><table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;</td>
<td>从根节点选取，该节点的子集</td>
</tr>
<tr>
<td>&#x2F;&#x2F;</td>
<td>选择文档中符合条件的所有节点（不考虑位置，可多层嵌套的）</td>
</tr>
<tr>
<td>.</td>
<td>选择当前节点</td>
</tr>
<tr>
<td>..</td>
<td>选择当前节点的父节点</td>
</tr>
<tr>
<td>@</td>
<td>选择属性</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>路径表达式</th>
</tr>
</thead>
<tbody><tr>
<td>div</td>
<td>选取div元素下的所有子节点</td>
</tr>
<tr>
<td>&#x2F;div</td>
<td>选取根节点div</td>
</tr>
<tr>
<td>div&#x2F;a</td>
<td>选取属于div子元素的所有a元素</td>
</tr>
<tr>
<td>&#x2F;&#x2F;div</td>
<td>选取所有div子元素</td>
</tr>
<tr>
<td>div&#x2F;&#x2F;p</td>
<td>找到所有div元素后代中的p元素</td>
</tr>
</tbody></table>
<h4 id="谓语（条件过滤）"><a href="#谓语（条件过滤）" class="headerlink" title="谓语（条件过滤）"></a>谓语（条件过滤）</h4><p>[]:用于过滤节点，类似于索引取值</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;ul&#x2F;li[1]</td>
<td>选取ul子元素的第一个li</td>
</tr>
<tr>
<td>&#x2F;ul&#x2F;li[@class&#x3D;”title”]</td>
<td>选取ul子元素的符合class要求的li</td>
</tr>
<tr>
<td>&#x2F;ul&#x2F;li[last()]</td>
<td>选取ul子元素的最后一个li</td>
</tr>
</tbody></table>
<h4 id="选取未知节点"><a href="#选取未知节点" class="headerlink" title="选取未知节点"></a>选取未知节点</h4><table>
<thead>
<tr>
<th>通配符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>匹配任何元素节点</td>
</tr>
<tr>
<td>@*</td>
<td>匹配任何属性节点</td>
</tr>
</tbody></table>
<h4 id="模糊匹配"><a href="#模糊匹配" class="headerlink" title="模糊匹配"></a>模糊匹配</h4><figure class="highlight xpath"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">[contains</span>(@属性，值)]</span><br><span class="line">#选取属性为attr，并且值为<span class="number">100</span></span><br><span class="line">//li<span class="built_in">[contains</span>(@attr,<span class="number">100</span>)]</span><br><span class="line">//*<span class="built_in">[contains</span>(<span class="type">text</span>(),<span class="string">&quot;肖&quot;</span>)] #属性还可以指文本</span><br></pre></td></tr></table></figure>

<h4 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h4><ul>
<li><h5 id="获取文本：-ul-ol-text"><a href="#获取文本：-ul-ol-text" class="headerlink" title="获取文本：&#x2F;ul&#x2F;ol&#x2F;text()"></a>获取文本：&#x2F;ul&#x2F;ol&#x2F;text()</h5></li>
<li><h5 id="获取属性：-ul-ol-herf"><a href="#获取属性：-ul-ol-herf" class="headerlink" title="获取属性：&#x2F;ul&#x2F;ol&#x2F;@herf"></a>获取属性：&#x2F;ul&#x2F;ol&#x2F;@herf</h5></li>
</ul>
<h3 id="实例：豆瓣抓取top250"><a href="#实例：豆瓣抓取top250" class="headerlink" title="实例：豆瓣抓取top250"></a>实例：豆瓣抓取top250</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">250</span>,<span class="number">25</span>):</span><br><span class="line">    url=<span class="string">f&quot;https://movie.douban.com/top250?start=<span class="subst">&#123;i&#125;</span>&quot;</span></span><br><span class="line">    a=requests.get(url,headers=head)</span><br><span class="line">    html=etree.HTML(a.text)<span class="comment">#生成element对象，才能使用xpath</span></span><br><span class="line">    wh=html.xpath(<span class="string">&quot;//ol/li&quot;</span>)<span class="comment">#先 确定一个大范围</span></span><br><span class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> wh:</span><br><span class="line">        title=li.xpath(<span class="string">&quot;.//span[@class=&#x27;title&#x27;][1]/text()&quot;</span>)<span class="comment">#再分别取小范围</span></span><br><span class="line">        stars=li.xpath(<span class="string">&quot;.//span[@class=&#x27;rating_num&#x27;]/text()&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;电影名称：&quot;</span>,title[<span class="number">0</span>],<span class="string">&quot;评价:&quot;</span>,stars[<span class="number">0</span>])</span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment">#伪装为浏览器 请求头 字典格式</span></span><br><span class="line">head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">250</span>,<span class="number">25</span>):</span><br><span class="line">    a=requests.get(<span class="string">&quot;https://movie.douban.com/top250?start=%d&quot;</span>%(i),headers=head).text</span><br><span class="line">    soup1=BeautifulSoup(a,<span class="string">&quot;html.parser&quot;</span>).find_all(<span class="string">&quot;span&quot;</span>,attrs=&#123;<span class="string">&quot;class&quot;</span>:<span class="string">&quot;title&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">for</span> soup <span class="keyword">in</span> soup1:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;/&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> soup.string:</span><br><span class="line">            <span class="built_in">print</span>(soup.string)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>优化代码，进行封装操作</p>
</li>
<li><pre><code class="python">&#39;&#39;&#39;
1.获取每个页面的html文件

2.从html文件中提取标题和评价信息

3.打印信息


&#39;&#39;&#39;

import requests
from lxml import etree

class douban:
    #定义类属性
    base_url=&quot;https://movie.douban.com/top250?start=&#123;&#125;&amp;filter=&quot;
    head=&#123;&quot;User-Agent&quot;:&quot;Mozilla/5.0&quot;&#125;

    #类初始化，设置一个列表用于保存所有的url
    def __init__(self):
        self.list=[]

    #获取url
    def huoqu(self):
        for i in range(0,250,25):
            url=self.base_url.format(i)
            self.list.append(url)
    #功能实现
    def run(self):
        print(&quot;=====开始抓取豆瓣top250=====&quot;)
        self.huoqu()
        for ui in self.list:
            a=requests.get(ui,headers=self.head)#请求
            html=etree.HTML(a.text)#解析
            wh=html.xpath(&quot;//ol/li&quot;)#先 确定一个大范围
            for li in wh:
                title=li.xpath(&quot;.//span[@class=&#39;title&#39;][1]/text()&quot;)#再分别取小范围
                stars=li.xpath(&quot;.//span[@class=&#39;rating_num&#39;]/text()&quot;)
                print(&quot;电影名称：&quot;,title[0],&quot;评价:&quot;,stars[0])

if __name__ == &#39;__main__&#39;:#作为脚本执行
    a=douban()#定义一个对象
    a.run()

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### get请求参数(易错点)</span><br><span class="line"></span><br><span class="line">- ##### 呈现在url中</span><br><span class="line"></span><br><span class="line">  ```python</span><br><span class="line">  import requests</span><br><span class="line">  #请求地址</span><br><span class="line">  url=&quot;https://movie.douban.com/top250?start=0&quot;</span><br><span class="line">  #请求头</span><br><span class="line">  head=&#123;&quot;User-Agent&quot;:&quot;Mozilla/5.0&quot;&#125;</span><br><span class="line">  </span><br><span class="line">  res=requests.get(url,headers=head)</span><br><span class="line">  print(res.content.decode())</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><h5 id="在params"><a href="#在params" class="headerlink" title="在params"></a>在params</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">#请求地址</span></span><br><span class="line">url=<span class="string">&quot;https://movie.douban.com/top250&quot;</span></span><br><span class="line"><span class="comment">#请求头</span></span><br><span class="line">head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0&quot;</span>&#125;</span><br><span class="line"><span class="comment">#请求参数(查询参数)</span></span><br><span class="line">params =&#123;<span class="string">&#x27;start&#x27;</span>:<span class="string">&#x27;0&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">res=requests.get(url,headers=head,params=params)</span><br><span class="line"><span class="built_in">print</span>(res.content.decode())</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="post请求和模拟登陆"><a href="#post请求和模拟登陆" class="headerlink" title="post请求和模拟登陆"></a>post请求和模拟登陆</h3><h4 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h4><img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240906140824788.png" class title="image-20240906140824788">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">发送post请求的方法：</span><br><span class="line">    requests.post()</span><br><span class="line">参数传递：</span><br><span class="line"><span class="number">1.</span>表单参数：form-data   </span><br><span class="line">    requests.post(url,data=字典参数)</span><br><span class="line"><span class="number">2.j</span>son参数：</span><br><span class="line">    request.post(url,json=字典参数)</span><br><span class="line">    </span><br><span class="line">Content-<span class="type">Type</span>: application/x-www-form-urlencoded 表示表单数据。</span><br><span class="line">Content-<span class="type">Type</span>: application/json 表示 JSON 数据。</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url=<span class="string">&quot;https://openapiv5.ketangpai.com//UserApi/login&quot;</span></span><br><span class="line">head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line">params=&#123;</span><br><span class="line">    <span class="string">&#x27;code&#x27;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>:<span class="string">&quot;3247119728@qq.com&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;encryption&#x27;</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;mobile&#x27;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&quot;YLe6MpD2kzXwKEYSsES82Q==&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;remember&#x27;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;reqtimestamp&quot;</span>: <span class="number">1725601555046</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;login&quot;</span>&#125;</span><br><span class="line">a=requests.post(url,json=params,headers=head)</span><br><span class="line"><span class="comment">#a=requests.get(url,headers=head,params=params)</span></span><br><span class="line"><span class="built_in">print</span>(a.json())</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="params中的值主要看负载中所呈现的值"><a href="#params中的值主要看负载中所呈现的值" class="headerlink" title="params中的值主要看负载中所呈现的值"></a>params中的值主要看负载中所呈现的值</h5></li>
</ul>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240906140500339.png" class title="image-20240906140500339">

<h4 id="模拟登陆"><a href="#模拟登陆" class="headerlink" title="模拟登陆"></a>模拟登陆</h4><h5 id="鉴权方式"><a href="#鉴权方式" class="headerlink" title="鉴权方式"></a>鉴权方式</h5><blockquote>
<p>请求方式：form-data </p>
</blockquote>
<ul>
<li><h5 id="cookie-session鉴权机制"><a href="#cookie-session鉴权机制" class="headerlink" title="cookie + session鉴权机制"></a>cookie + session鉴权机制</h5></li>
<li><blockquote>
<p>cookie是针对用户方的。由服务器保存在用户浏览器的小文本文件，无论何时访问均有cookie信息</p>
<p>cookie具有有效期</p>
</blockquote>
</li>
</ul>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240906141442533.png" class title="image-20240906141442533">

<ul>
<li><h5 id="session"><a href="#session" class="headerlink" title="session"></a>session</h5></li>
<li><blockquote>
<p>session是针对服务器的。服务器会给用户创建session，用户访问服务器时需要用session表明自己的身份</p>
</blockquote>
</li>
</ul>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/%E4%B8%8B%E8%BD%BD.jpg" class title="下载">

<blockquote>
<p>流程：</p>
<p>1.传递账号密码 2.登陆后保存cookie（在响应头的set-cookie字段中） 3.请求其他页面，携带cookie</p>
</blockquote>
<h5 id="基于token的鉴权机制"><a href="#基于token的鉴权机制" class="headerlink" title="基于token的鉴权机制"></a>基于token的鉴权机制</h5><blockquote>
<p>域名地址，请求域名地址和浏览器的域名地址不同</p>
</blockquote>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/token.jpg" class title="token">

<blockquote>
<p>流程：</p>
<p>1.传递账号密码 2.登陆后保存token（在响应体中） 3.请求其他页面，携带token</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">requests 传递cookie的三种方式</span><br><span class="line"><span class="number">1.</span>以字典格式传递(模拟登陆，再获取)</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url=<span class="string">&quot;https://passport.china.com/logon&quot;</span></span><br><span class="line">rarmas=&#123;</span><br><span class="line">    <span class="string">&quot;userName&quot;</span>:<span class="string">&quot;177775990925&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>:<span class="string">&quot;a123123&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">res=requests.post(url,headers=head,data=rarmas)<span class="comment">#为表单数据</span></span><br><span class="line">a=res.cookies</span><br><span class="line"></span><br><span class="line">res2=requests.get(url,headers=head,cookies=a)</span><br><span class="line"><span class="built_in">print</span>(res2.content.decode())</span><br><span class="line"><span class="number">2.</span>字符串格式(先登录直接抓包获取)</span><br><span class="line">        headers=&#123;<span class="string">&#x27;cookie&#x27;</span>:<span class="string">&#x27;值&#x27;</span>&#125;</span><br><span class="line">        requests.get()</span><br><span class="line"><span class="number">3.</span>使用requests.session自动记录cookie（模拟浏览器的过程）</span><br><span class="line">        <span class="comment">#创建请求对象</span></span><br><span class="line">        http=requests.session()</span><br><span class="line">        <span class="comment">#发送登陆请求</span></span><br><span class="line">        res=http.post(url,data=params,headers=head)</span><br><span class="line">        <span class="comment">#请求需要登陆的页面</span></span><br><span class="line">        res2=http.get(url,headers=head)</span><br><span class="line">        <span class="built_in">print</span>(res2.content.decode())</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="json数据格式（键值对"><a href="#json数据格式（键值对" class="headerlink" title="json数据格式（键值对)"></a>json数据格式（键值对)</h5></li>
</ul>
<h3 id="AJAX异步请求数据"><a href="#AJAX异步请求数据" class="headerlink" title="AJAX异步请求数据"></a>AJAX异步请求数据</h3><ul>
<li><p>页面的源代码与检查中的资源html文件不相同时，无法通过requests.get().text获取该页面的信息</p>
<style>.sybkcglonslw{zoom: 33%;}</style><img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240907105909186.png" class="sybkcglonslw" alt="image-20240907105909186">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time <span class="comment">#时间戳</span></span><br><span class="line">head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line">url=<span class="string">&quot;https://careers.tencent.com/tencentcareer/api/data/GetMultiDictionary?timestamp=1725677071402&amp;language=zh-cn&amp;type=Nationality,WorkPlace,OuterType,BG,PostAttr&quot;</span></span><br><span class="line">params=&#123;<span class="string">&quot;language&quot;</span>: <span class="string">&quot;zh-cn&quot;</span>,<span class="string">&quot;type&quot;</span>: <span class="string">&quot;Nationality,WorkPlace,OuterType,BG,PostAttr&quot;</span>,<span class="string">&quot;timestamp&quot;</span>:time.time()*<span class="number">1000</span>&#125;</span><br><span class="line">res=requests.get(url,headers=head,params=params)</span><br><span class="line"><span class="comment">#获取json数据，自动转化为字典形式</span></span><br><span class="line">result=res.json()</span><br><span class="line"><span class="comment">#获取想要的信息</span></span><br><span class="line">num=result[<span class="string">&#x27;Data&#x27;</span>][<span class="string">&#x27;BG&#x27;</span>]</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> num:</span><br><span class="line">        f.write(<span class="built_in">str</span>(i[<span class="string">&#x27;Name&#x27;</span>])) <span class="comment">#write中写入的均为字符串</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="数据提取之jsonpath"><a href="#数据提取之jsonpath" class="headerlink" title="数据提取之jsonpath"></a>数据提取之jsonpath</h4><blockquote>
<ul>
<li><h5 id="非结构化数据：HTML"><a href="#非结构化数据：HTML" class="headerlink" title="非结构化数据：HTML"></a>非结构化数据：HTML</h5></li>
<li><p>正则表达式，xpath进行处理</p>
</li>
<li><h5 id="结构化数据：json，xml"><a href="#结构化数据：json，xml" class="headerlink" title="结构化数据：json，xml"></a>结构化数据：json，xml</h5></li>
<li><p>转化为python进行处理</p>
</li>
</ul>
</blockquote>
<ul>
<li><h5 id="json数据格式（键值对-1"><a href="#json数据格式（键值对-1" class="headerlink" title="json数据格式（键值对)"></a>json数据格式（键值对)</h5></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br><span class="line">    &quot;name&quot;: &quot;Alice&quot;,</span><br><span class="line">    &quot;age&quot;: 30,</span><br><span class="line">    &quot;city&quot;: &quot;New York&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;&quot;key&quot;:value&#125; #json对象</span><br><span class="line">[1,2,3,4] #json数组</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><strong><code>json.loads()</code></strong>: 从 JSON 字符串读取数据。</li>
<li><strong><code>json.load()</code></strong>: 从 JSON 文件读取数据。</li>
<li><strong><code>json.dump()</code></strong>: 将 Python 对象写入 JSON 文件。</li>
<li><strong><code>json.dumps()</code></strong>: 将 Python 对象转换为 JSON 字符串。</li>
</ul>
</blockquote>
<blockquote>
<p>json单独写在程序中时需要加上引号，json格式本身属于str</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.json&quot;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>)<span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.json&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data=json.load(f)</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">data = <span class="string">&#x27;&#123;&quot;name&quot;:&quot;hhh&quot;,&quot;age&quot;:18,&quot;num&quot;: [1,2,3,4],&quot;isdelete&quot;:true&#125;&#x27;</span></span><br><span class="line">pydata=json.loads(data)</span><br><span class="line"><span class="built_in">print</span>(pydata)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">data=&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;hhh&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;num&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="string">&#x27;isdelete&#x27;</span>: <span class="literal">True</span>&#125;</span><br><span class="line">jsondata=json.dumps(data)</span><br><span class="line"><span class="built_in">print</span>(jsondata)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.json&quot;</span>,<span class="string">&quot;a&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(data,f,ensure_ascii=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240907132621222.png" class title="image-20240907132621222">

<ul>
<li><h5 id="json中的true为python中的True"><a href="#json中的true为python中的True" class="headerlink" title="json中的true为python中的True"></a>json中的true为python中的True</h5></li>
</ul>
<h5 id="jsonpath的使用"><a href="#jsonpath的使用" class="headerlink" title="jsonpath的使用"></a>jsonpath的使用</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> jsonpath <span class="keyword">import</span> jsonpath</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.json&quot;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data=json.load(f)</span><br><span class="line">name=jsonpath(data,<span class="string">&#x27;$.name&#x27;</span>)</span><br><span class="line">num=jsonpath(data,<span class="string">&#x27;$.num[?(@&lt;=2)]&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(name),<span class="built_in">type</span>(num))</span><br><span class="line"><span class="built_in">print</span>(name,num)</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="：根节点"><a href="#：根节点" class="headerlink" title="$：根节点"></a>$：根节点</h5></li>
<li><h5 id="：当前路径下的子集"><a href="#：当前路径下的子集" class="headerlink" title=". ：当前路径下的子集"></a>. ：当前路径下的子集</h5></li>
<li><h5 id="：当前路径下的所有子集"><a href="#：当前路径下的所有子集" class="headerlink" title=".. ：当前路径下的所有子集"></a>.. ：当前路径下的所有子集</h5></li>
<li><h5 id="：表示当前元素"><a href="#：表示当前元素" class="headerlink" title="@：表示当前元素"></a>@：表示当前元素</h5></li>
</ul>
<h5 id="小饭桌内容爬取"><a href="#小饭桌内容爬取" class="headerlink" title="小饭桌内容爬取"></a>小饭桌内容爬取</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> jsonpath <span class="keyword">import</span> jsonpath</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;============开始爬取=============&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">20</span>):</span><br><span class="line">    url = <span class="string">f&quot;https://www.xfz.cn/api/website/articles/?p=<span class="subst">&#123;j&#125;</span>&amp;n=20&amp;type=%E8%9E%8D%E8%B5%84%E6%B6%88%E6%81%AF&quot;</span></span><br><span class="line">    head = &#123;<span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line">    data = requests.get(url, headers=head)</span><br><span class="line">    result = data.json()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">        num=jsonpath(result,<span class="string">f&#x27;$.data.<span class="subst">&#123;i&#125;</span>.title&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        key=jsonpath(result,<span class="string">f&#x27;$.data.<span class="subst">&#123;i&#125;</span>.keywords.0&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">print</span>(num,key)</span><br><span class="line">        time.sleep(<span class="number">2</span>)<span class="comment">#要进行间隔，否则容易搞崩服务器</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;=========结束==========&quot;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="bilbil视频爬取"><a href="#bilbil视频爬取" class="headerlink" title="bilbil视频爬取"></a>bilbil视频爬取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">head=&#123;<span class="string">&quot;Cookie&quot;</span>:<span class="string">&quot;buvid4=C880EA19-F29F-5FA3-ABB8-04A5E7F77D8F82924-023031215-fHoXjH2dj%2BDnZ%2Bh4zY835w%3D%3D; FEED_LIVE_VERSION=V8; buvid_fp_plain=undefined; DedeUserID=452462653; DedeUserID__ckMd5=d31a5186c848c822; enable_web_push=DISABLE; CURRENT_BLACKGAP=0; LIVE_BUVID=AUTO5817039327566584; _uuid=C99108467-7EAE-F43C-55108-EC43D36BC49670346infoc; buvid3=DAAD063D-2A81-7932-2FAE-E4CFC0D49B9F99068infoc; b_nut=1713517899; header_theme_version=CLOSE; rpdid=|(u)~m~JYlm)0J&#x27;u~uRum||ul; hit-dyn-v2=1; fingerprint=e3bcfb25a246e745225205f53b730317; VIP_DEFINITION_GUIDE=1; CURRENT_QUALITY=112; CURRENT_FNVAL=4048; buvid_fp=e3bcfb25a246e745225205f53b730317; home_feed_column=5; bili_ticket=eyJhbGciOiJIUzI1NiIsImtpZCI6InMwMyIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MjU3MTI2NDMsImlhdCI6MTcyNTQ1MzM4MywicGx0IjotMX0.ooel_Yxr6mUSOQkl9B_a6uwuI1GspVm2yG6i7_hCMCw; bili_ticket_expires=1725712583; PVID=2; b_lsid=1322B572_191CB0DC980; bmg_af_switch=1; bmg_src_def_domain=i2.hdslb.com; bp_t_offset_452462653=974314035472236544; SESSDATA=576e1ffa%2C1741240565%2Cc3abb%2A92CjAJ4UuYPo_1JqCIftuOf5W5vWWG8wHlTaDJeHIBeM0Vbq5_cupxioqbU-HmdWHdiP4SVmZJMlBOdGpneHlqaWJ2b2g5ckFHa2dSMDVkclVsYUtUelV4UjhqNmxQa0hLYm5pMUdYcFlQam93bHBGdU16a3lhZWxLNGRxUnh5LWtDelk5TjFKbW1nIIEC; bili_jct=199bd9b8ee2a924fb816942017492a3f; sid=5b1vi4a3; browser_resolution=1591-715&quot;</span>,</span><br><span class="line">      <span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Referer&quot;</span>:<span class="string">&quot;https://www.bilibili.com/video/BV1ANpweZEfi/?spm_id_from=333.1007.tianma.1-2-2.click&amp;vd_source=11808e62ad685ec1359fbdbcbdb2437c&quot;</span>&#125;</span><br><span class="line">url1=<span class="string">&quot;https://upos-sz-mirror08c.bilivideo.com/upgcxcode/66/93/1348689366/1348689366-1-100027.m4s?e=ig8euxZM2rNcNbdlhoNvNC8BqJIzNbfqXBvEqxTEto8BTrNvN0GvT90W5JZMkX_YN0MvXg8gNEV4NC8xNEV4N03eN0B5tZlqNxTEto8BTrNvNeZVuJ10Kj_g2UB02J0mN0B5tZlqNCNEto8BTrNvNC7MTX502C8f2jmMQJ6mqF2fka1mqx6gqj0eN0B599M=&amp;uipk=5&amp;nbs=1&amp;deadline=1725698756&amp;gen=playurlv2&amp;os=08cbv&amp;oi=0&amp;trid=3a93ea4c49d64dd9872c494f0ec8b178u&amp;mid=452462653&amp;platform=pc&amp;og=hw&amp;upsig=36e3a2c2a35a52f2a9fb5707d024fdbb&amp;uparams=e,uipk,nbs,deadline,gen,os,oi,trid,mid,platform,og&amp;bvc=vod&amp;nettype=0&amp;orderid=0,3&amp;buvid=DAAD063D-2A81-7932-2FAE-E4CFC0D49B9F99068infoc&amp;build=0&amp;f=u_0_0&amp;agrr=1&amp;bw=157053&amp;logo=80000000&quot;</span></span><br><span class="line">url2=<span class="string">&quot;https://upos-sz-mirror08c.bilivideo.com/upgcxcode/66/93/1348689366/1348689366-1-30280.m4s?e=ig8euxZM2rNcNbdlhoNvNC8BqJIzNbfqXBvEqxTEto8BTrNvN0GvT90W5JZMkX_YN0MvXg8gNEV4NC8xNEV4N03eN0B5tZlqNxTEto8BTrNvNeZVuJ10Kj_g2UB02J0mN0B5tZlqNCNEto8BTrNvNC7MTX502C8f2jmMQJ6mqF2fka1mqx6gqj0eN0B599M=&amp;uipk=5&amp;nbs=1&amp;deadline=1725698756&amp;gen=playurlv2&amp;os=08cbv&amp;oi=0&amp;trid=3a93ea4c49d64dd9872c494f0ec8b178u&amp;mid=452462653&amp;platform=pc&amp;og=hw&amp;upsig=b0532688248bd3cf89b7dead4515cc60&amp;uparams=e,uipk,nbs,deadline,gen,os,oi,trid,mid,platform,og&amp;bvc=vod&amp;nettype=0&amp;orderid=0,3&amp;buvid=DAAD063D-2A81-7932-2FAE-E4CFC0D49B9F99068infoc&amp;build=0&amp;f=u_0_0&amp;agrr=1&amp;bw=21483&amp;logo=80000000&quot;</span></span><br><span class="line">a1=requests.get(url1,headers=head)</span><br><span class="line">a2=requests.get(url2,headers=head)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;bilbil1.mp4&quot;</span>,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">      f.write(a1.content)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;bilbil2.mp4&quot;</span>,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">      f.write(a2.content)</span><br></pre></td></tr></table></figure>

<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/%E6%97%A0%E6%A0%87%E9%A2%98.jpg" class title="无标题">

<ul>
<li>第一个即为视频，第二个为音频。下面的也依次都为一个视频，一个音频（两者为分开的）</li>
</ul>
<h5 id="视频和音频合并"><a href="#视频和音频合并" class="headerlink" title="视频和音频合并"></a>视频和音频合并</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> moviepy.editor <span class="keyword">import</span> ffmpeg_tools</span><br><span class="line"></span><br><span class="line">ffmpeg_tools.ffmpeg_merge_video_audio(<span class="string">&#x27;bilbil1.mp4&#x27;</span>,<span class="string">&#x27;bilbil2.mp4&#x27;</span>,<span class="string">&#x27;bilbil.mp4&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="selenium操作"><a href="#selenium操作" class="headerlink" title="selenium操作"></a>selenium操作</h3><h4 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h4><blockquote>
<p>模拟人为访问浏览器的操作</p>
</blockquote>
<ul>
<li><h5 id="配置文件加安装安装-selenium-及配置-edge-浏览器驱动-edge浏览器驱动-CSDN博客"><a href="#配置文件加安装安装-selenium-及配置-edge-浏览器驱动-edge浏览器驱动-CSDN博客" class="headerlink" title="配置文件加安装安装 selenium 及配置 edge 浏览器驱动_edge浏览器驱动-CSDN博客"></a>配置文件加安装<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_61552056/article/details/134956649">安装 selenium 及配置 edge 浏览器驱动_edge浏览器驱动-CSDN博客</a></h5></li>
<li><h5 id="启动浏览器"><a href="#启动浏览器" class="headerlink" title="启动浏览器"></a>启动浏览器</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">driver = webdriver.Chrome()  <span class="comment"># 也可以使用 Firefox(), Edge() </span></span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="打开网页"><a href="#打开网页" class="headerlink" title="打开网页"></a>打开网页</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element(By.XPATH,<span class="string">&#x27;//&#x27;</span>)<span class="comment">#找第一个符合的</span></span><br><span class="line">driver.find_elements(By.XPATH,<span class="string">&#x27;//&#x27;</span>)<span class="comment">#找均符合的</span></span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="与元素交互"><a href="#与元素交互" class="headerlink" title="与元素交互"></a>与元素交互</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">element.send_keys(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">element.click()</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="刷新页面"><a href="#刷新页面" class="headerlink" title="刷新页面"></a>刷新页面</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.refresh()</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="关闭浏览器"><a href="#关闭浏览器" class="headerlink" title="关闭浏览器"></a>关闭浏览器</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver=webdriver.Edge()</span><br><span class="line">url=<span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#打开操作页面</span></span><br><span class="line">driver.get(url)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#页面最大化</span></span><br><span class="line">driver.maximize_window()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#刷新页面</span></span><br><span class="line">driver.refresh()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;地址：&quot;</span>,driver.current_url)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;标题：&quot;</span>,driver.title)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#获取数据</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;baidu.html&quot;</span>,<span class="string">&quot;w&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    html=driver.page_source<span class="comment">#网页的源代码,渲染之后的源码</span></span><br><span class="line">    f.write(html)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#截图</span></span><br><span class="line">driver.save_screenshot(<span class="string">&#x27;baidu.png&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭</span></span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>



<h4 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h4><ul>
<li>利用Xpath去定位</li>
</ul>
<h4 id="元素的属性和操作"><a href="#元素的属性和操作" class="headerlink" title="元素的属性和操作"></a>元素的属性和操作</h4><h5 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h5><blockquote>
<p>tagname:标签名</p>
<p>text:文本，item.find_element(By.XPATH,’.&#x2F;div&#x2F;h1’).text</p>
<p>#html中xpath可以直接&#x2F;h1&#x2F;text()获取</p>
</blockquote>
<h5 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h5><blockquote>
<p>click(),点击元素</p>
<p>send_keys(),输入内容</p>
<p>clear(),清空表单</p>
</blockquote>
<h5 id="例子（百度自动搜索）"><a href="#例子（百度自动搜索）" class="headerlink" title="例子（百度自动搜索）"></a>例子（百度自动搜索）</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开操作页面</span></span><br><span class="line">driver.get(url)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">driver.refresh()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">driver.maximize_window()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过xpath去定位</span></span><br><span class="line">ele = driver.find_element(By.XPATH, <span class="string">&#x27;//*[@id=&quot;kw&quot;]&#x27;</span>)</span><br><span class="line"><span class="comment">#在框中输入</span></span><br><span class="line">ele.send_keys(<span class="string">&quot;人大代表&quot;</span>)</span><br><span class="line"><span class="comment">#提交表单，执行搜索，模拟人为回车</span></span><br><span class="line">ele.send_keys(Keys.RETURN)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment">#清空搜索框</span></span><br><span class="line">ele.clear()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">data=driver.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;1&quot;]/div/h3/a/div/div/p/span/span&#x27;</span>)</span><br><span class="line"><span class="comment">#点击定位到的东西</span></span><br><span class="line">data.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">driver.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="例子（自动登陆中华网）"><a href="#例子（自动登陆中华网）" class="headerlink" title="例子（自动登陆中华网）"></a>例子（自动登陆中华网）</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">url = <span class="string">&quot;https://passport.china.com/logon&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开操作页面</span></span><br><span class="line">driver.get(url)</span><br><span class="line">driver.refresh()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">driver.maximize_window()</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">ele2=driver.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;userInput&quot;]/input&#x27;</span>).send_keys(<span class="string">&quot;123123123&quot;</span>)</span><br><span class="line">ele3=driver.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;55&quot;]&#x27;</span>).send_keys(<span class="string">&quot;123123123&quot;</span>)</span><br><span class="line">ele4=driver.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;index_logonid&quot;]&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">driver.quit()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="例子-建言内容抓取"><a href="#例子-建言内容抓取" class="headerlink" title="例子(建言内容抓取)"></a>例子(建言内容抓取)</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">url = <span class="string">&quot;https://liuyan.people.com.cn/threads/list?checkStatus=0&amp;fid=559&amp;formName=%E6%B5%99%E6%B1%9F%E7%9C%81%E5%A7%94%E4%B9%A6%E8%AE%B0%E6%98%93%E7%82%BC%E7%BA%A2&amp;position=0&amp;province=14&amp;city=&amp;saveLocation=14&amp;pForumNames=%E6%B5%99%E6%B1%9F%E7%9C%81&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开操作页面</span></span><br><span class="line">driver.get(url)</span><br><span class="line">driver.refresh()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">driver.maximize_window()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment">#抓取信息</span></span><br><span class="line"><span class="comment">#先定位到包含所有数据的li列表</span></span><br><span class="line">ele=driver.find_elements(By.XPATH,<span class="string">&#x27;//ul[@class=&quot;replyList&quot;]/li&#x27;</span>)<span class="comment">#列表类型</span></span><br><span class="line"><span class="comment">#遍历所有的li的元素</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> ele:</span><br><span class="line">    title=item.find_element(By.XPATH,<span class="string">&#x27;./div/h1&#x27;</span>).text<span class="comment">#html中xpath可以直接/h1/text()获取</span></span><br><span class="line">    time1=item.find_element(By.XPATH,<span class="string">&#x27;.//div[@class=&quot;headMainS fl&quot;]/p&#x27;</span>).text</span><br><span class="line">    content=item.find_element(By.XPATH,<span class="string">&#x27;./p/span&#x27;</span>).text</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;建言标题：&quot;</span>,title)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;建言时间：&quot;</span>,time1)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;建言内容：&quot;</span>,content)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;===========&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">driver.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h4><h5 id="等待操作"><a href="#等待操作" class="headerlink" title="等待操作"></a>等待操作</h5><ul>
<li><h5 id="time-sleep-强制等待，不管页面情况"><a href="#time-sleep-强制等待，不管页面情况" class="headerlink" title="time.sleep(),强制等待，不管页面情况"></a>time.sleep(),强制等待，不管页面情况</h5></li>
<li><h5 id="driver-implicitly-wait-x-智能等待，页面加载出来就会执行，最长时间为x秒"><a href="#driver-implicitly-wait-x-智能等待，页面加载出来就会执行，最长时间为x秒" class="headerlink" title="driver.implicitly_wait(x),智能等待，页面加载出来就会执行，最长时间为x秒"></a>driver.implicitly_wait(x),智能等待，页面加载出来就会执行，最长时间为x秒</h5></li>
<li><h5 id="显式等待：可设置等待条件，等待元素可见，元素可点击"><a href="#显式等待：可设置等待条件，等待元素可见，元素可点击" class="headerlink" title="显式等待：可设置等待条件，等待元素可见，元素可点击"></a>显式等待：可设置等待条件，等待元素可见，元素可点击</h5></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">url=<span class="string">&quot;https://mail.qq.com/?lang=cn&quot;</span></span><br><span class="line">driver.get(url)</span><br><span class="line"></span><br><span class="line"><span class="comment">#隐式等待</span></span><br><span class="line">driver.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">driver.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;switcher_plogin&quot;]&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line"><span class="comment">#显式等待</span></span><br><span class="line">wait=WebDriverWait(driver,<span class="number">30</span>,<span class="number">0.2</span>).until(    <span class="comment">#驱动，最长时间30秒，每隔0.2秒检测</span></span><br><span class="line">    EC.visibility_of_element_located((By.XPATH,<span class="string">&#x27;//*[@id=&quot;switcher_plogin&quot;]&#x27;</span>)) <span class="comment">#内部的定位为元组形式，等待当前元素出现</span></span><br><span class="line">   <span class="comment">#EC.element_to_be_clickable((By.XPATH,&#x27;//*[@id=&quot;switcher_plogin&quot;]&#x27;)) #等待当前元素可点击</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#强制等待</span></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">driver.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="iframe切换"><a href="#iframe切换" class="headerlink" title="iframe切换"></a>iframe切换</h5><blockquote>
<p>页面中嵌套了另一个页面</p>
</blockquote>


<blockquote>
<p>登陆的页面实际上是嵌套在其中，直接通过Xpath是点击不到的</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">url=<span class="string">&quot;https://mail.qq.com/?lang=cn&quot;</span></span><br><span class="line">driver.get(url)</span><br><span class="line"></span><br><span class="line"><span class="comment">#切换到要操作的iframe中</span></span><br><span class="line">driver.switch_to.frame(<span class="number">1</span>)<span class="comment">#进入第一个iframe</span></span><br><span class="line">driver.switch_to.frame(<span class="string">&#x27;ptlogin_iframe&#x27;</span>)<span class="comment">#进入name=&quot;ptlogin_iframe&quot;的iframe</span></span><br><span class="line"></span><br><span class="line">driver.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;switcher_plogin&quot;]&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">driver.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方式一:通过iframe名字进行切换</span></span><br><span class="line">driver.switch_to.frame(<span class="string">&#x27;ptlogin_iframe&#x27;</span>)</span><br><span class="line"><span class="comment">#方式二：通过element元素进行切换</span></span><br><span class="line">eleiframe=driver.find_element(By.XPATH,<span class="string">&#x27;//iframe[@id=&quot;ptlogin_iframe&quot;]&#x27;</span>)</span><br><span class="line">driver.switch_to.frame(eleiframe)</span><br><span class="line"><span class="comment">#方式三：通过索引，好像只能开头用</span></span><br><span class="line">driver.switch_to.frame(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>切换会默认的HTML页面,返回原先的主HTML（最外层）。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to.default_content()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>切换到父级的iframe（最外面的iframe）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to.parent_frame()</span><br></pre></td></tr></table></figure>



<h5 id="窗口滚动-页面中没有但可以定位，无法进行点击"><a href="#窗口滚动-页面中没有但可以定位，无法进行点击" class="headerlink" title="窗口滚动(页面中没有但可以定位，无法进行点击)"></a>窗口滚动(页面中没有但可以定位，无法进行点击)</h5><ul>
<li><h5 id="selenium滚动窗口"><a href="#selenium滚动窗口" class="headerlink" title="selenium滚动窗口"></a>selenium滚动窗口</h5><ul>
<li><p>selenium实现滚动到元素可见</p>
</li>
<li><pre><code class="python">ele.location_once_scrolled_into_view 
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 案例</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line">from selenium.webdriver.support.wait import WebDriverWait</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">url=&quot;https://liuyan.people.com.cn/threads/list?checkStatus=0&amp;fid=559&amp;formName=%E6%B5%99%E6%B1%9F%E7%9C%81%E5%A7%94%E4%B9%A6%E8%AE%B0%E6%98%93%E7%82%BC%E7%BA%A2&amp;position=0&amp;province=14&amp;city=&amp;saveLocation=14&amp;pForumNames=%E6%B5%99%E6%B1%9F%E7%9C%81&quot;</span><br><span class="line">driver.get(url)</span><br><span class="line">driver.refresh()</span><br><span class="line">driver.maximize_window()</span><br><span class="line">#隐式</span><br><span class="line">driver.implicitly_wait(10)</span><br><span class="line">while True:#当代码报错即找完了就退出循环</span><br><span class="line">    try:</span><br><span class="line">        ele=driver.find_element(By.XPATH,&#x27;//*[@class=&quot;mordList&quot;]&#x27;)</span><br><span class="line">        time.sleep(3)</span><br><span class="line">        res=ele.location_once_scrolled_into_view #滚动到看到上述定位的东西为止</span><br><span class="line">        ele.click() #看到后才能进行点击</span><br><span class="line">    except:</span><br><span class="line">        break</span><br><span class="line">data=driver.find_elements(By.XPATH,&#x27;//ul[@class=&quot;replyList&quot;]/li&#x27;)</span><br><span class="line">time.sleep(5)</span><br><span class="line">print(&quot;数据量：&quot;,len(data))</span><br><span class="line">for item in data:</span><br><span class="line">    table=item.find_element(By.XPATH,&#x27;./div[@class=&quot;tabList fl&quot;]/h1&#x27;).text</span><br><span class="line">    content=item.find_element(By.XPATH,&#x27;./p[@class=&quot;replyContent&quot;]/span[1]&#x27;).text</span><br><span class="line">    print(&quot;主题为：&quot;,table)</span><br><span class="line">    print(&quot;内容为：&quot;,content)</span><br><span class="line">time.sleep(10)</span><br><span class="line"></span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><h5 id="JS脚本执行"><a href="#JS脚本执行" class="headerlink" title="JS脚本执行"></a>JS脚本执行</h5><ul>
<li><h5 id="js滚动窗口"><a href="#js滚动窗口" class="headerlink" title="js滚动窗口"></a>js滚动窗口</h5></li>
<li><pre><code class="python">#滚动到指定位置，起点永远为顶部，开头
window.scrollTo(0,100)#移动到坐标（0，100）
#相对滚动位置
window.scrollBy(0,100)#移动到上次坐标的相对（0，100）处

顶部：0
底部：document.body.scrollHeight
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">#python中使用js脚本代码</span><br><span class="line">js=&#x27;window.scrollBy(0,100)&#x27;</span><br><span class="line">driver.execute_script(js)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><h5 id="js鼠标操作"><a href="#js鼠标操作" class="headerlink" title="js鼠标操作"></a>js鼠标操作</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br></pre></td></tr></table></figure>

<blockquote>
<h5 id="Actionchains-鼠标操作"><a href="#Actionchains-鼠标操作" class="headerlink" title="Actionchains:鼠标操作"></a>Actionchains:鼠标操作</h5><ul>
<li><p>click:左击</p>
</li>
<li><p>double_click:双击</p>
</li>
<li><p>context_click:右击</p>
</li>
<li><p>move_to_element:移动到某个节点</p>
</li>
<li><p>click_and_hold:左击不松开</p>
</li>
<li><p>move_by_offse:鼠标相对当前位置移动</p>
</li>
<li><p>drag_and_drop():在一个位置按下，到另一个位置释放</p>
</li>
<li><h5 id="release：释放鼠标"><a href="#release：释放鼠标" class="headerlink" title="release：释放鼠标"></a>release：释放鼠标</h5></li>
<li><h5 id="perform：执行动作"><a href="#perform：执行动作" class="headerlink" title="perform：执行动作"></a>perform：执行动作</h5></li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">url=<span class="string">&quot;https://www.runoob.com/try/try.php?filename=jqueryui-example-droppable&quot;</span></span><br><span class="line">driver.get(url)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">driver.maximize_window()</span><br><span class="line"><span class="comment">#注意是否页面存在嵌套的iframe</span></span><br><span class="line">driver.switch_to.frame(driver.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;iframeResult&quot;]&#x27;</span>))</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment">#创建鼠标操作对象</span></span><br><span class="line">ac=ActionChains(driver)</span><br><span class="line"><span class="comment">#移动到该位置</span></span><br><span class="line">ac.move_to_element(driver.find_element(By.XPATH,<span class="string">&#x27;//div[@id=&quot;draggable&quot;]&#x27;</span>))</span><br><span class="line"><span class="comment">#拖住</span></span><br><span class="line">ac.click_and_hold()</span><br><span class="line"><span class="comment">#移动到另一个位置</span></span><br><span class="line">ac.move_to_element(driver.find_element(By.XPATH,<span class="string">&#x27;//div[@id=&quot;droppable&quot;]&#x27;</span>))</span><br><span class="line"><span class="comment">#释放鼠标，收回控制权</span></span><br><span class="line">ac.release()</span><br><span class="line"><span class="comment">#执行上述动作</span></span><br><span class="line">ac.perform()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="异步爬虫"><a href="#异步爬虫" class="headerlink" title="异步爬虫"></a>异步爬虫</h3><p><a target="_blank" rel="noopener" href="https://www.myfreemp3.com.cn/?page=audioPage&type=netease&name=%E5%91%A8%E6%9D%B0%E4%BC%A6">屋顶 - 周杰伦,温岚 - myfreemp3音乐官网-mp3歌曲免费下载-myfreemp3在线音乐免费下载官网-歌曲下载-myfreemp3 app官网下载</a></p>
<blockquote>
<p>抓取周杰伦的所有歌曲</p>
</blockquote>
<ul>
<li>下载每一首歌的封面图，mp3文件，歌词均保存到本地文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> jsonpath <span class="keyword">import</span> jsonpath</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue,Empty</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">duoxfz</span>:</span><br><span class="line">    url=<span class="string">&quot;https://www.xfz.cn/api/website/articles&quot;</span></span><br><span class="line">    head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line">    <span class="comment">#保存每页咨询的队列</span></span><br><span class="line">    page_list=Queue()</span><br><span class="line">    <span class="comment">#保存每页json代码的队列</span></span><br><span class="line">    json_list=Queue()</span><br><span class="line">    <span class="comment">#保存解析后信息的队列</span></span><br><span class="line">    inf_list=Queue()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_page</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line">            self.page_list.put((i,<span class="string">f&#x27;xfz<span class="subst">&#123;i&#125;</span>&#x27;</span>))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                page,name=self.page_list.get(timeout=<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">except</span> Empty:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            params=&#123;<span class="string">&quot;p&quot;</span>: page,<span class="string">&quot;n&quot;</span>: <span class="number">20</span>&#125;</span><br><span class="line">            data = requests.get(self.url, headers=self.head,params=params)</span><br><span class="line">            content = data.json()</span><br><span class="line">            self.json_list.put(content)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(<span class="built_in">str</span>(name)):</span><br><span class="line">                os.mkdir(<span class="built_in">str</span>(name))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="built_in">str</span>(name))</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;已经创建完成&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">paser</span>(<span class="params">self</span>):</span><br><span class="line">        a=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                content=self.json_list.get(timeout=<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">except</span> Empty:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            a+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">                title = jsonpath(content, <span class="string">&#x27;$.data.&#123;&#125;.title&#x27;</span>.<span class="built_in">format</span>(i))[<span class="number">0</span>]</span><br><span class="line">                photolink = jsonpath(content, <span class="string">&#x27;$.data.&#123;&#125;.photo&#x27;</span>.<span class="built_in">format</span>(i))[<span class="number">0</span>]</span><br><span class="line">                keywords = jsonpath(content, <span class="string">&#x27;$.data.&#123;&#125;.keywords&#x27;</span>.<span class="built_in">format</span>(i))[<span class="number">0</span>]</span><br><span class="line">                file_name = <span class="string">&#x27;&#123;&#125;/&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">f&#x27;xfz<span class="subst">&#123;a&#125;</span>&#x27;</span>,keywords[<span class="number">0</span>])</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(<span class="built_in">str</span>(file_name)):</span><br><span class="line">                    os.mkdir(<span class="built_in">str</span>(file_name))</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    file_name=file_name+<span class="string">&quot;副&quot;</span></span><br><span class="line">                    os.mkdir(<span class="built_in">str</span>(file_name))</span><br><span class="line">                self.inf_list.put((file_name,title,photolink))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                file_name, title, photolink=self.inf_list.get(timeout=<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">except</span> Empty:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="comment">#保存title作为txt文件,开一个该路径下的文件并写入</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;&#123;&#125;/1.txt&quot;</span>.<span class="built_in">format</span>(file_name),<span class="string">&quot;w&quot;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(title)</span><br><span class="line"></span><br><span class="line">            <span class="comment">#保存photo为jpg文件</span></span><br><span class="line">            da=requests.get(photolink,headers=self.head)</span><br><span class="line">            hh=da.content</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;&#123;&#125;/2.jpg&quot;</span>.<span class="built_in">format</span>(file_name),<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(hh)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        self.get_page()</span><br><span class="line">        self.get()</span><br><span class="line">        self.paser()</span><br><span class="line">        self.save()</span><br><span class="line">a=duoxfz()</span><br><span class="line">a.run()</span><br></pre></td></tr></table></figure>

<p>重点：利用队列作为管道，将每道工序干完的活都放进管道中，其余的活从管道当中取</p>
<h4 id="cookie池和IP代理"><a href="#cookie池和IP代理" class="headerlink" title="cookie池和IP代理"></a>cookie池和IP代理</h4><blockquote>
<h5 id="代理IP：客户端到服务器中间，创建多个代理，让服务器认为不是同一个客户端在请求，防止真是地址IP被泄露。"><a href="#代理IP：客户端到服务器中间，创建多个代理，让服务器认为不是同一个客户端在请求，防止真是地址IP被泄露。" class="headerlink" title="代理IP：客户端到服务器中间，创建多个代理，让服务器认为不是同一个客户端在请求，防止真是地址IP被泄露。"></a>代理IP：客户端到服务器中间，创建多个代理，让服务器认为不是同一个客户端在请求，防止真是地址IP被泄露。</h5><h5 id="客户端-》代理服务-》服务端"><a href="#客户端-》代理服务-》服务端" class="headerlink" title="客户端-》代理服务-》服务端"></a>客户端-》代理服务-》服务端</h5></blockquote>
<h5 id="代理IP使用和IP池搭建"><a href="#代理IP使用和IP池搭建" class="headerlink" title="代理IP使用和IP池搭建"></a>代理IP使用和IP池搭建</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">pachou</span>:</span><br><span class="line">    url=<span class="string">&quot;&quot;</span><span class="comment">#代理IP域名</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        data=requests.get(self.url)</span><br><span class="line">        self.<span class="built_in">list</span>=data.json()[<span class="string">&#x27;data&#x27;</span>]<span class="comment">#内部由许多的IP，作为IP池</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_url</span>(<span class="params">self</span>):</span><br><span class="line">        url1=<span class="string">&quot;&quot;</span><span class="comment">#请求地址</span></span><br><span class="line">        li=random.choice(self.<span class="built_in">list</span>)</span><br><span class="line">        head=&#123;&#125;<span class="comment">#请求头</span></span><br><span class="line">        proix=&#123;</span><br><span class="line">            <span class="string">&quot;http&quot;</span>:<span class="string">&quot;http://&#123;&#125;:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(li[<span class="string">&#x27;ip&#x27;</span>],li[<span class="string">&#x27;port&#x27;</span>])</span><br><span class="line">        &#125;<span class="comment">#请求代理IP</span></span><br><span class="line">        res=requests.get(url1,headers=head,proxies=proix)</span><br><span class="line">        <span class="keyword">return</span> res.json()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="cookie池搭建"><a href="#cookie池搭建" class="headerlink" title="cookie池搭建"></a>cookie池搭建</h5><blockquote>
<p>一套cookie对应一个用户的信息，请求太频繁会被对方识别为爬虫</p>
<ul>
<li>登录：多账户登录，保存cookie</li>
<li>未登录：多启动几个浏览器（手动获取cookie信息先保存）</li>
</ul>
</blockquote>
<p>搭建思路：准备多个账号，爬数据之前开始批量登录，并将cookie保存到cookie池（列表）中，每次执行就可以从cookie池中随机获取一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">get_cookie</span>:</span><br><span class="line">    <span class="comment">#准备多个账号密码</span></span><br><span class="line">    params=[&#123;<span class="string">&quot;userName&quot;</span>:<span class="string">&quot;123123132&quot;</span>,<span class="string">&quot;password&quot;</span>:<span class="string">&quot;123123&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;userName&quot;</span>:<span class="string">&quot;123123&quot;</span>,<span class="string">&quot;password&quot;</span>:<span class="string">&quot;123&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;userName&quot;</span>:<span class="string">&quot;123123&quot;</span>,<span class="string">&quot;password&quot;</span>:<span class="string">&quot;1231&quot;</span>&#125;]</span><br><span class="line">    url=<span class="string">&quot;https://passport.china.com/logon&quot;</span></span><br><span class="line">    head=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.cookie=[]</span><br><span class="line">    <span class="comment">#获取cookies放入cookie池中</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.params:</span><br><span class="line">            data=requests.post(self.url,data=item)</span><br><span class="line">            <span class="keyword">if</span> data.ok:</span><br><span class="line">                self.cookie.append(data.cookies)</span><br><span class="line">    <span class="comment">#随机挑选cookie池中的cookie,实现登录</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        cookie=random.choice(self.cookie)</span><br><span class="line">        <span class="keyword">return</span> cookie</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">spiderdemo</span>:</span><br><span class="line">    <span class="comment">#利用cookie值进行访问特定网站</span></span><br><span class="line">    ck=get_cookie()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_html_page</span>(<span class="params">self</span>):</span><br><span class="line">        url=<span class="string">&quot;https://passport.china.com/&quot;</span><span class="comment">#需要登录后才能查看的页面</span></span><br><span class="line">        res=requests.get(url,cookies=self.ck.run())</span><br><span class="line">        <span class="keyword">return</span> res.content.decode()</span><br><span class="line">sd=spiderdemo()</span><br><span class="line">sd.get_html_page()</span><br></pre></td></tr></table></figure>



<h5 id="cookie池-IP池封装"><a href="#cookie池-IP池封装" class="headerlink" title="cookie池+IP池封装"></a>cookie池+IP池封装</h5><h3 id="反爬方式（有需要再找）"><a href="#反爬方式（有需要再找）" class="headerlink" title="反爬方式（有需要再找）"></a>反爬方式（有需要再找）</h3><h4 id="selenium反爬"><a href="#selenium反爬" class="headerlink" title="selenium反爬"></a>selenium反爬</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">opt=webdriver.EdgeOptions()</span><br><span class="line">opt.add_argument(<span class="string">&#x27;--disable-infobars&#x27;</span>)</span><br><span class="line">opt.add_experimental_option(<span class="string">&quot;excludeSwitches&quot;</span>,[<span class="string">&quot;enable-automation&quot;</span>])</span><br><span class="line">opt.add_experimental_option(<span class="string">&#x27;useAutomationExtension&#x27;</span>,<span class="literal">False</span>)</span><br><span class="line">driver=webdriver.Edge(options=opt)</span><br><span class="line">driver.get(<span class="string">&#x27;https://bot.sannysoft.com/&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">60</span>)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>

<h4 id="JS逆向"><a href="#JS逆向" class="headerlink" title="JS逆向"></a>JS逆向</h4><h5 id="参数加密"><a href="#参数加密" class="headerlink" title="参数加密"></a>参数加密</h5><p><a target="_blank" rel="noopener" href="https://www.94mxd.com.cn/signin">媒想到 | 新媒体营销增长引擎 (94mxd.com.cn)</a></p>
<p>密码进行了加密处理，但不知道其加密方式</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240912155550243.png" class title="image-20240912155550243">

<p>去源代码中探寻password</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240912155938214.png" class title="image-20240912155938214">

<p>找出pwd，分析代码 hashPwd应该作为pwd的一种加密，设置断点同时进入其中。</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240912160530389.png" class title="image-20240912160530389">

<p>发现整体加密程序，放入python中进行操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#典型的md5加密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">md5_handle_pwd</span>(<span class="params">pwd</span>):</span><br><span class="line">str_pwd=pwd+<span class="string">&#x27;Hq44cyp4mT9Fh5eNrZ67bjifidFhW%fb0ICjx#6gE59@P@Hr8%!WuYBa1yvytq$qh1FEM18qA8Hp9m3VLux9luIYpeYzA2l2W3Z&#x27;</span></span><br><span class="line">    m5=hashlib.md5()</span><br><span class="line">    m5.update(str_pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> m5.hexdigest()</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://liuyan.people.com.cn/threads/list?checkStatus=0&fid=559&formName=%E6%B5%99%E6%B1%9F%E7%9C%81%E5%A7%94%E4%B9%A6%E8%AE%B0%E6%98%93%E7%82%BC%E7%BA%A2&position=0&province=14&city=&saveLocation=14&pForumNames=%E6%B5%99%E6%B1%9F%E7%9C%81">浙江省委书记易炼红-领导留言板-人民网 (people.com.cn)</a></p>
<p>点击不同的df，看负载中的哪些值发生变化，哪些值没变</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914093147250.png" class title="image-20240914093147250">

<p>发现有两处不同</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914093542437.png" class title="image-20240914093542437">

<p>发现lastItem与上一个df的lastItem相同</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914093947837.png" class title="image-20240914093947837">

<p>去源码里面找signature的位置</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914095530684.png" class title="image-20240914095530684">

<p>找到i函数存在的位置</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914100117901.png" class title="image-20240914100117901">

<p>分析参数得出python程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line">appCode=<span class="string">&quot;PC42ce3bfa4980a9&quot;</span></span><br><span class="line">param=&#123;<span class="string">&#x27;fid&#x27;</span>: <span class="string">&#x27;559&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;showUnAnswer&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">       <span class="string">&#x27;typeId&#x27;</span>: <span class="number">5</span>,</span><br><span class="line">       <span class="string">&#x27;lastItem&#x27;</span>: <span class="string">&#x27;20021296&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;position&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;rows&#x27;</span>: <span class="number">10</span>,</span><br><span class="line">       <span class="string">&#x27;orderType&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="comment">#MD5加密代码</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">md5_handle_pwd</span>(<span class="params">pwd</span>):</span><br><span class="line">    str_pwd=pwd</span><br><span class="line">    m5=hashlib.md5()</span><br><span class="line">    m5.update(str_pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> m5.hexdigest()</span><br><span class="line"></span><br><span class="line">n=md5_handle_pwd(appCode)[<span class="number">0</span>:<span class="number">16</span>]</span><br><span class="line"></span><br><span class="line">s=<span class="string">&quot;/v1/threads/list/df&quot;</span>+json.dumps(param)+n</span><br><span class="line">sign=md5_handle_pwd(s.replace(<span class="string">&quot; &quot;</span>,<span class="string">&quot;&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>

<h5 id="滑动验证码分析"><a href="#滑动验证码分析" class="headerlink" title="滑动验证码分析"></a>滑动验证码分析</h5><p><a target="_blank" rel="noopener" href="https://user.qunar.com/">去哪儿</a></p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914101254891.png" class title="image-20240914101254891">

<ul>
<li><h5 id="登陆过程接口的分析"><a href="#登陆过程接口的分析" class="headerlink" title="登陆过程接口的分析"></a>登陆过程接口的分析</h5></li>
</ul>
<p>滑动验证请求（主要目标，如何拿json参数data）</p>
<p>snapshot</p>
<blockquote>
<h5 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h5><img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914101710409.png" class title="image-20240914101710409">

<h5 id="请求地址"><a href="#请求地址" class="headerlink" title="请求地址"></a>请求地址</h5><img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914101547522.png" class title="image-20240914101547522">
</blockquote>
<p>针对data去看源代码</p>
<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914104946144.png" class title="image-20240914104946144">

<img src="/2025/07/19/python%E7%88%AC%E8%99%AB/07/19/python%E7%88%AC%E8%99%AB/image-20240914105111046.png" class title="image-20240914105111046">

<blockquote>
<h5 id="参数data：未知内容"><a href="#参数data：未知内容" class="headerlink" title="参数data：未知内容"></a>参数data：未知内容</h5><ul>
<li>获取滑动的轨迹和时间信息（this.sliderInfo）</li>
<li>滑动的总距离：408</li>
<li>轨迹信息：”42459;47.00;272.00;2.00”(track)</li>
<li>时间戳后五位；滑块X轴坐标；滑块Y轴坐标；滑动距离</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#123;</span><br><span class="line"><span class="string">&quot;openTime&quot;</span>:<span class="number">1726282613295</span>,</span><br><span class="line"><span class="string">&quot;startTime&quot;</span>:<span class="number">1726282614407</span>,</span><br><span class="line"><span class="string">&quot;endTime&quot;</span>:<span class="number">1726282614996</span>,</span><br><span class="line"><span class="string">&quot;userAgent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>,</span><br><span class="line"><span class="string">&quot;uid&quot;</span>:<span class="string">&quot;00014c00306864dba9c81013&quot;</span>,</span><br><span class="line"><span class="string">&quot;track&quot;</span>:					[<span class="string">&quot;14495;56.00;277.00;1.00&quot;</span>,<span class="string">&quot;14517;58.00;276.00;3.00&quot;</span>,<span class="string">&quot;14538;65.00;276.00;10.00&quot;</span>,<span class="string">&quot;14559;72.00;276.00;17.00&quot;</span>,<span class="string">&quot;14580;84.00;276.00;29.00&quot;</span>,<span class="string">&quot;14602;118.00;276.00;63.00&quot;</span>,<span class="string">&quot;14624;157.00;276.00;102.00&quot;</span>,<span class="string">&quot;14647;187.00;276.00;132.00&quot;</span>,<span class="string">&quot;14669;205.00;276.00;150.00&quot;</span>,<span class="string">&quot;14692;221.00;276.00;166.00&quot;</span>,<span class="string">&quot;14716;230.00;276.00;175.00&quot;</span>,<span class="string">&quot;14738;243.00;276.00;188.00&quot;</span>,<span class="string">&quot;14760;259.00;276.00;204.00&quot;</span>,<span class="string">&quot;14783;283.00;276.00;228.00&quot;</span>,<span class="string">&quot;14805;309.00;276.00;254.00&quot;</span>,<span class="string">&quot;14828;329.00;276.00;274.00&quot;</span>,<span class="string">&quot;14849;347.00;276.00;292.00&quot;</span>,<span class="string">&quot;14872;366.00;276.00;311.00&quot;</span>,<span class="string">&quot;14895;384.00;276.00;329.00&quot;</span>,<span class="string">&quot;14917;408.00;276.00;353.00&quot;</span>,<span class="string">&quot;14940;432.00;276.00;377.00&quot;</span>,<span class="string">&quot;14962;456.00;276.00;401.00&quot;</span>,<span class="string">&quot;14986;474.00;276.00;419.00&quot;</span>],</span><br><span class="line"><span class="string">&quot;acc&quot;</span>:[],</span><br><span class="line"><span class="string">&quot;ori&quot;</span>:[],</span><br><span class="line"><span class="string">&quot;deviceMotion&quot;</span>:[&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;,&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">true</span>&#125;]</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>通过AES加密</li>
<li>密钥：227V2xYeHTARSh1R</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">           <span class="keyword">var</span> e = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">sliderInfo</span>);</span><br><span class="line">           res= d.<span class="property">AES</span>.<span class="title function_">encrypt</span>(d.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(e), 	                                          d.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(<span class="string">&quot;227V2xYeHTARSh1R&quot;</span>),</span><br><span class="line">                  &#123;</span><br><span class="line">                           <span class="attr">mode</span>: d.<span class="property">mode</span>.<span class="property">ECB</span>,</span><br><span class="line">                           <span class="attr">padding</span>: d.<span class="property">pad</span>.<span class="property">Pkcs7</span></span><br><span class="line">                  &#125;)</span><br><span class="line">    		<span class="keyword">return</span> res.<span class="title function_">toString</span>()</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure>

<p>python加密</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">def</span> <span class="title function_">get_aes</span>(<span class="params">content</span>):</span><br><span class="line">   <span class="comment">#密钥，将其编码为utf-8的形式</span></span><br><span class="line">   key=<span class="string">&quot;227V2xYeHTARSh1R&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">   <span class="comment">#创建一个加密对象</span></span><br><span class="line">   aes=AES.new(key,mode=AES.MODE_ECB)</span><br><span class="line">   <span class="comment">#将加密的内容转化为字节形式，并填充</span></span><br><span class="line">   raw=pad(content.encode(<span class="string">&#x27;utf-8&#x27;</span>),<span class="number">16</span>)</span><br><span class="line">   <span class="comment">#使用AES对象对填充后的数据进行加密</span></span><br><span class="line">   aes_res = aes.encrypt(raw)</span><br><span class="line">   <span class="comment">#对加密后的结果进行Base64编码转换为字符串，便于传输和存储</span></span><br><span class="line">   res=base64.b64encode(aes_res)</span><br></pre></td></tr></table></figure>


</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.Padding <span class="keyword">import</span> pad</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">http=requests.session()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_track</span>(<span class="params">st</span>):</span><br><span class="line">    <span class="comment">#定义X轴和Y轴的起始位置</span></span><br><span class="line">    x=<span class="number">50</span></span><br><span class="line">    y=<span class="number">270</span></span><br><span class="line">    <span class="comment">#滑动总宽度</span></span><br><span class="line">    width=random.randint(<span class="number">408</span>,<span class="number">428</span>)</span><br><span class="line">    track=[<span class="string">&#x27;&#123;&#125;;50.00;270.00;0.00&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(st)[-<span class="number">5</span>:])]</span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> s&lt;width:</span><br><span class="line">        <span class="comment">#时间</span></span><br><span class="line">        st+=random.randint(<span class="number">20</span>,<span class="number">50</span>)</span><br><span class="line">        t=<span class="built_in">str</span>(st)[-<span class="number">5</span>:]</span><br><span class="line">        <span class="comment">#随机生成一个前进距离</span></span><br><span class="line">        w=random.randint(<span class="number">10</span>,<span class="number">50</span>)</span><br><span class="line">        s+=w</span><br><span class="line">        x+=w</span><br><span class="line">        tr=<span class="string">&#x27;&#123;&#125;;&#123;:.2f&#125;;&#123;:.2f&#125;;&#123;:.2f&#125;&#x27;</span>.<span class="built_in">format</span>(t,x,y,<span class="built_in">min</span>(s,width))</span><br><span class="line">        track.append(tr)</span><br><span class="line">    <span class="keyword">return</span> track</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_uid</span>():</span><br><span class="line">    <span class="comment">#获取uid，uid在cookie里面的用户标识符</span></span><br><span class="line">    res=http.get(<span class="string">&quot;https://user.qunar.com/passport/login.jsp&quot;</span>)</span><br><span class="line">    cookie=res.cookies</span><br><span class="line">    uid=cookie[<span class="string">&#x27;QN1&#x27;</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_other</span>():</span><br><span class="line">    ot=<span class="built_in">int</span>(time.time()*<span class="number">1000</span>)</span><br><span class="line">    st=ot+random.randint(<span class="number">1000</span>,<span class="number">3000</span>)</span><br><span class="line">    track=get_track(st)</span><br><span class="line">    params=&#123;<span class="string">&quot;openTime&quot;</span>: ot,</span><br><span class="line">            <span class="string">&quot;startTime&quot;</span>: st,</span><br><span class="line">            <span class="string">&quot;endTime&quot;</span>: <span class="built_in">int</span>(time.time()*<span class="number">1000</span>),</span><br><span class="line">            <span class="string">&quot;userAgent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0&quot;</span>,</span><br><span class="line">            <span class="string">&quot;uid&quot;</span>: <span class="string">&quot;00014c00306864dba9c81013&quot;</span>,<span class="comment">#变值</span></span><br><span class="line">            <span class="string">&quot;track&quot;</span>:track,</span><br><span class="line">            <span class="string">&quot;acc&quot;</span>:[],</span><br><span class="line">	        <span class="string">&quot;ori&quot;</span>:[],</span><br><span class="line">            <span class="string">&quot;deviceMotion&quot;</span>:[&#123;<span class="string">&quot;isTrusted&quot;</span>:<span class="literal">True</span>&#125; <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(random.randint(<span class="number">10</span>,<span class="number">100</span>))]</span><br><span class="line">    &#125;</span><br><span class="line">    data=get_aes(json.dumps(params))</span><br><span class="line">    params=&#123;<span class="string">&quot;appCode&quot;</span>: <span class="string">&quot;register_pc&quot;</span>,</span><br><span class="line">            <span class="string">&quot;cs&quot;</span>: <span class="string">&quot;pc&quot;</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: data,</span><br><span class="line">            <span class="string">&quot;orca&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> params</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_aes</span>(<span class="params">content</span>):</span><br><span class="line">    <span class="comment">#密钥，将其编码为utf-8的形式</span></span><br><span class="line">    key=<span class="string">&quot;227V2xYeHTARSh1R&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment">#创建一个加密对象</span></span><br><span class="line">    aes=AES.new(key,mode=AES.MODE_ECB)</span><br><span class="line">    <span class="comment">#将加密的内容转化为字节形式，并填充</span></span><br><span class="line">    raw=pad(content.encode(<span class="string">&#x27;utf-8&#x27;</span>),<span class="number">16</span>)</span><br><span class="line">    <span class="comment">#使用AES对象对填充后的数据进行加密</span></span><br><span class="line">    aes_res = aes.encrypt(raw)</span><br><span class="line">    <span class="comment">#对加密后的结果进行Base64编码转换为字符串，便于传输和存储</span></span><br><span class="line">    res=base64.b64encode(aes_res)</span><br><span class="line">    <span class="keyword">return</span> res.decode()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url=<span class="string">&#x27;https://vercode.qunar.com/inner/captcha/snapshot&#x27;</span></span><br><span class="line">    params=get_other()</span><br><span class="line">    data=http.post(url,json=params)</span><br><span class="line">    <span class="built_in">print</span>(data.json())</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p>​                                                                   </p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://dzchenyu.github.io">Dzchen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://dzchenyu.github.io/2025/07/19/python%E7%88%AC%E8%99%AB/">https://dzchenyu.github.io/2025/07/19/python%E7%88%AC%E8%99%AB/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://dzchenyu.github.io" target="_blank">Dzchen博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2025/07/18/%E5%89%8D%E7%AB%AF%E4%B9%8B%E8%B7%AF/" title="前端之路"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">前端之路</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88oop%EF%BC%89"><span class="toc-text">python面向对象（oop）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%EF%BC%9A%E5%85%B1%E5%90%8C%E7%89%B9%E5%BE%81"><span class="toc-text">类：共同特征</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%B1%BB%E5%B1%9E%E6%80%A7"><span class="toc-text">1.类属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%EF%BC%9A%E5%AE%9A%E4%B9%89%E5%9C%A8%E7%B1%BB%E9%87%8C%E9%9D%A2%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-text">方法：定义在类里面的函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-text">1.类方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-text">2.静态方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%EF%BC%9A"><span class="toc-text">对象：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%98%AF%E9%80%9A%E8%BF%87%E7%B1%BB%E5%88%9B%E5%BB%BA%E5%87%BA%E6%9D%A5"><span class="toc-text">对象是通过类创建出来</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%E6%96%B9%E6%B3%95"><span class="toc-text">自定义创建方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-text">对象方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-text">对象属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-text">对象属性的访问</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95"><span class="toc-text">对象初始化方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-text">类的继承</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-text">继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%86%99%E7%88%B6%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">重写父类的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#object"><span class="toc-text">object</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-text">封装学生信息管理系统</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">其他知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E7%AE%A1%E7%90%86"><span class="toc-text">文件路径管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#os%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">os模块的使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pathlib%E6%A8%A1%E5%9D%97"><span class="toc-text">pathlib模块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-text">模块和包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-text">模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85"><span class="toc-text">包</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">迭代器和生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text">迭代器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9A%E4%B9%89"><span class="toc-text">生成器表达式定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E5%87%BD%E6%95%B0%E5%88%9B%E5%BB%BA%E7%94%9F%E6%88%90%E5%99%A8%EF%BC%88yield%EF%BC%89"><span class="toc-text">生成器函数创建生成器（yield）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E5%86%85%E9%83%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92"><span class="toc-text">生成器内部的数据交互</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text">列表推导式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E7%88%AC%E8%99%AB"><span class="toc-text">python爬虫</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">爬虫工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#robots%E5%8D%8F%E8%AE%AE"><span class="toc-text">robots协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#User-agent-%E6%8C%87%E5%AE%9A%E7%88%AC%E8%99%AB%E5%90%8D%E7%A7%B0%E6%88%96%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-text">User-agent:指定爬虫名称或标识符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DIsallow-%E6%8C%87%E5%AE%9A%E4%B8%8D%E5%85%81%E8%AE%B8%E8%AE%BF%E9%97%AE%E7%9A%84URL%E8%B7%AF%E5%BE%84"><span class="toc-text">DIsallow:指定不允许访问的URL路径</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E5%92%8CHTTPS%E5%8D%8F%E8%AE%AE"><span class="toc-text">HTTP和HTTPS协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP-%E5%8F%91%E5%B8%83%E5%92%8C%E6%8E%A5%E5%8F%97html%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">HTTP:发布和接受html页面的方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTPS-%E6%9B%B4%E5%AE%89%E5%85%A8%E7%9A%84HTTP%EF%BC%8C%E5%9C%A8HTTP%E4%B8%AD%E5%8A%A0%E5%85%A5SSL%E5%B1%82%E3%80%82%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8Eweb%E7%9A%84%E5%AE%89%E5%85%A8%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%8C%E5%9C%A8%E4%BC%A0%E8%BE%93%E5%B1%82%E5%AF%B9%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E5%8A%A0%E5%AF%86"><span class="toc-text">HTTPS:更安全的HTTP，在HTTP中加入SSL层。主要用于web的安全传输协议，在传输层对网络连接加密</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-text">请求报文</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#GET%EF%BC%9A%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%8CGET%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E6%98%BE%E7%A4%BA%EF%BC%8C%E5%9D%87%E6%98%BE%E7%A4%BA%E5%9C%A8%E7%BD%91%E5%9D%80%E4%B8%8A%E3%80%82%E4%BE%8B%E5%A6%82%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1-Top-250-douban-com"><span class="toc-text">GET：从服务器上获取数据，GET请求参数显示，均显示在网址上。例如豆瓣电影 Top 250 (douban.com)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#POST%EF%BC%9A%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%EF%BC%8CPOST%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%9C%A8%E8%AF%B7%E6%B1%82%E4%BD%93%E4%B8%AD%EF%BC%8C%E4%BB%A5%E9%9A%90%E6%80%A7%E7%9A%84%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E5%8F%91%E9%80%81"><span class="toc-text">POST：向服务器提交数据，POST请求参数在请求体中，以隐性的方式进行发送</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%AF%B7%E6%B1%82%E5%A4%B4-%E7%94%A8%E4%BA%8E%E5%8F%8D%E7%88%AC"><span class="toc-text">常用请求头(用于反爬)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#User-Agent%EF%BC%9A%E6%A8%A1%E6%8B%9F%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE"><span class="toc-text">User-Agent：模拟浏览器访问</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Referer%EF%BC%9A%E8%A1%A8%E6%98%8E%E5%BD%93%E5%89%8D%E8%AF%B7%E6%B1%82%E4%BB%8E%E5%93%AA%E4%B8%AA%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-text">Referer：表明当前请求从哪个页面跳转</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie-%E4%BF%9D%E6%8C%81%E7%99%BB%E9%99%86%E7%8A%B6%E6%80%81%E6%88%96%E8%B7%9F%E8%B8%AA%E7%94%A8%E6%88%B7"><span class="toc-text">cookie:保持登陆状态或跟踪用户</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#http%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-text">http响应状态码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#200%EF%BC%9A%E6%88%90%E5%8A%9F"><span class="toc-text">200：成功</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#302%EF%BC%8C307%EF%BC%9A%E4%B8%B4%E6%97%B6%E8%BD%AC%E7%A7%BB%E8%87%B3%E6%96%B0%E7%9A%84url"><span class="toc-text">302，307：临时转移至新的url</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#404-%E6%89%BE%E4%B8%8D%E5%88%B0%E8%AF%A5%E9%A1%B5%E9%9D%A2"><span class="toc-text">404:找不到该页面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#500%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%85%E9%83%A8%E5%87%BA%E9%94%99"><span class="toc-text">500：服务器内部出错</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#503%EF%BC%9A%E6%9C%8D%E5%8A%A1%E4%B8%8D%E5%8F%AF%E7%94%A8%EF%BC%8C%E8%A2%AB%E5%8F%8D%E7%88%AC"><span class="toc-text">503：服务不可用，被反爬</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie%E4%BF%A1%E6%81%AF"><span class="toc-text">cookie信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set-cookie-%E5%AF%B9%E6%96%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AEcookie%E5%88%B0%E7%94%A8%E6%88%B7%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E7%BC%93%E5%AD%98"><span class="toc-text">set-cookie(对方服务器设置cookie到用户浏览器的缓存)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AE%B0%E5%BD%95%E4%BF%A1%E6%81%AF-%E7%A1%AE%E5%AE%9A%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD"><span class="toc-text">cookie 客户端记录信息 确定用户身份</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#session-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AE%B0%E5%BD%95%E8%AE%B0%E5%BD%95-%E7%A1%AE%E5%AE%9A%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD"><span class="toc-text">session 服务端记录记录 确定用户身份</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#requests%E4%BD%BF%E7%94%A8"><span class="toc-text">requests使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8F%91%E9%80%81get%E8%AF%B7%E6%B1%82"><span class="toc-text">1.发送get请求</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD"><span class="toc-text">实例：图片下载</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%8A%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-text">把图片保存到本地</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9F%B3%E4%B9%90%E8%8E%B7%E5%8F%96"><span class="toc-text">音乐获取</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96Xpath"><span class="toc-text">数据提取Xpath</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E5%8F%96%E8%8A%82%E7%82%B9"><span class="toc-text">选取节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%93%E8%AF%AD%EF%BC%88%E6%9D%A1%E4%BB%B6%E8%BF%87%E6%BB%A4%EF%BC%89"><span class="toc-text">谓语（条件过滤）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E5%8F%96%E6%9C%AA%E7%9F%A5%E8%8A%82%E7%82%B9"><span class="toc-text">选取未知节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D"><span class="toc-text">模糊匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">获取数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%96%87%E6%9C%AC%EF%BC%9A-ul-ol-text"><span class="toc-text">获取文本：&#x2F;ul&#x2F;ol&#x2F;text()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%B1%9E%E6%80%A7%EF%BC%9A-ul-ol-herf"><span class="toc-text">获取属性：&#x2F;ul&#x2F;ol&#x2F;@herf</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E8%B1%86%E7%93%A3%E6%8A%93%E5%8F%96top250"><span class="toc-text">实例：豆瓣抓取top250</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8params"><span class="toc-text">在params</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#post%E8%AF%B7%E6%B1%82%E5%92%8C%E6%A8%A1%E6%8B%9F%E7%99%BB%E9%99%86"><span class="toc-text">post请求和模拟登陆</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#post%E8%AF%B7%E6%B1%82"><span class="toc-text">post请求</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#params%E4%B8%AD%E7%9A%84%E5%80%BC%E4%B8%BB%E8%A6%81%E7%9C%8B%E8%B4%9F%E8%BD%BD%E4%B8%AD%E6%89%80%E5%91%88%E7%8E%B0%E7%9A%84%E5%80%BC"><span class="toc-text">params中的值主要看负载中所呈现的值</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E7%99%BB%E9%99%86"><span class="toc-text">模拟登陆</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%89%B4%E6%9D%83%E6%96%B9%E5%BC%8F"><span class="toc-text">鉴权方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie-session%E9%89%B4%E6%9D%83%E6%9C%BA%E5%88%B6"><span class="toc-text">cookie + session鉴权机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#session"><span class="toc-text">session</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Etoken%E7%9A%84%E9%89%B4%E6%9D%83%E6%9C%BA%E5%88%B6"><span class="toc-text">基于token的鉴权机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#json%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%EF%BC%88%E9%94%AE%E5%80%BC%E5%AF%B9"><span class="toc-text">json数据格式（键值对)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AJAX%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-text">AJAX异步请求数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96%E4%B9%8Bjsonpath"><span class="toc-text">数据提取之jsonpath</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%9E%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE%EF%BC%9AHTML"><span class="toc-text">非结构化数据：HTML</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE%EF%BC%9Ajson%EF%BC%8Cxml"><span class="toc-text">结构化数据：json，xml</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#json%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%EF%BC%88%E9%94%AE%E5%80%BC%E5%AF%B9-1"><span class="toc-text">json数据格式（键值对)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#json%E4%B8%AD%E7%9A%84true%E4%B8%BApython%E4%B8%AD%E7%9A%84True"><span class="toc-text">json中的true为python中的True</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jsonpath%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">jsonpath的使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%9A%E6%A0%B9%E8%8A%82%E7%82%B9"><span class="toc-text">$：根节点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%9A%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84%E4%B8%8B%E7%9A%84%E5%AD%90%E9%9B%86"><span class="toc-text">. ：当前路径下的子集</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%9A%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E5%AD%90%E9%9B%86"><span class="toc-text">.. ：当前路径下的所有子集</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%9A%E8%A1%A8%E7%A4%BA%E5%BD%93%E5%89%8D%E5%85%83%E7%B4%A0"><span class="toc-text">@：表示当前元素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E9%A5%AD%E6%A1%8C%E5%86%85%E5%AE%B9%E7%88%AC%E5%8F%96"><span class="toc-text">小饭桌内容爬取</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bilbil%E8%A7%86%E9%A2%91%E7%88%AC%E5%8F%96"><span class="toc-text">bilbil视频爬取</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E5%92%8C%E9%9F%B3%E9%A2%91%E5%90%88%E5%B9%B6"><span class="toc-text">视频和音频合并</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#selenium%E6%93%8D%E4%BD%9C"><span class="toc-text">selenium操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A5%E9%97%A8"><span class="toc-text">入门</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E5%AE%89%E8%A3%85%E5%AE%89%E8%A3%85-selenium-%E5%8F%8A%E9%85%8D%E7%BD%AE-edge-%E6%B5%8F%E8%A7%88%E5%99%A8%E9%A9%B1%E5%8A%A8-edge%E6%B5%8F%E8%A7%88%E5%99%A8%E9%A9%B1%E5%8A%A8-CSDN%E5%8D%9A%E5%AE%A2"><span class="toc-text">配置文件加安装安装 selenium 及配置 edge 浏览器驱动_edge浏览器驱动-CSDN博客</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-text">启动浏览器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E7%BD%91%E9%A1%B5"><span class="toc-text">打开网页</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0"><span class="toc-text">查找元素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8E%E5%85%83%E7%B4%A0%E4%BA%A4%E4%BA%92"><span class="toc-text">与元素交互</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2"><span class="toc-text">刷新页面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-text">关闭浏览器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-text">例子</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E5%AE%9A%E4%BD%8D"><span class="toc-text">元素定位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E7%9A%84%E5%B1%9E%E6%80%A7%E5%92%8C%E6%93%8D%E4%BD%9C"><span class="toc-text">元素的属性和操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-text">属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C"><span class="toc-text">操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%EF%BC%88%E7%99%BE%E5%BA%A6%E8%87%AA%E5%8A%A8%E6%90%9C%E7%B4%A2%EF%BC%89"><span class="toc-text">例子（百度自动搜索）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%EF%BC%88%E8%87%AA%E5%8A%A8%E7%99%BB%E9%99%86%E4%B8%AD%E5%8D%8E%E7%BD%91%EF%BC%89"><span class="toc-text">例子（自动登陆中华网）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-%E5%BB%BA%E8%A8%80%E5%86%85%E5%AE%B9%E6%8A%93%E5%8F%96"><span class="toc-text">例子(建言内容抓取)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6"><span class="toc-text">进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E6%93%8D%E4%BD%9C"><span class="toc-text">等待操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#time-sleep-%E5%BC%BA%E5%88%B6%E7%AD%89%E5%BE%85%EF%BC%8C%E4%B8%8D%E7%AE%A1%E9%A1%B5%E9%9D%A2%E6%83%85%E5%86%B5"><span class="toc-text">time.sleep(),强制等待，不管页面情况</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#driver-implicitly-wait-x-%E6%99%BA%E8%83%BD%E7%AD%89%E5%BE%85%EF%BC%8C%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%87%BA%E6%9D%A5%E5%B0%B1%E4%BC%9A%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%9C%80%E9%95%BF%E6%97%B6%E9%97%B4%E4%B8%BAx%E7%A7%92"><span class="toc-text">driver.implicitly_wait(x),智能等待，页面加载出来就会执行，最长时间为x秒</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E7%AD%89%E5%BE%85%EF%BC%9A%E5%8F%AF%E8%AE%BE%E7%BD%AE%E7%AD%89%E5%BE%85%E6%9D%A1%E4%BB%B6%EF%BC%8C%E7%AD%89%E5%BE%85%E5%85%83%E7%B4%A0%E5%8F%AF%E8%A7%81%EF%BC%8C%E5%85%83%E7%B4%A0%E5%8F%AF%E7%82%B9%E5%87%BB"><span class="toc-text">显式等待：可设置等待条件，等待元素可见，元素可点击</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#iframe%E5%88%87%E6%8D%A2"><span class="toc-text">iframe切换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E6%BB%9A%E5%8A%A8-%E9%A1%B5%E9%9D%A2%E4%B8%AD%E6%B2%A1%E6%9C%89%E4%BD%86%E5%8F%AF%E4%BB%A5%E5%AE%9A%E4%BD%8D%EF%BC%8C%E6%97%A0%E6%B3%95%E8%BF%9B%E8%A1%8C%E7%82%B9%E5%87%BB"><span class="toc-text">窗口滚动(页面中没有但可以定位，无法进行点击)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#selenium%E6%BB%9A%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-text">selenium滚动窗口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JS%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C"><span class="toc-text">JS脚本执行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#js%E6%BB%9A%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-text">js滚动窗口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#js%E9%BC%A0%E6%A0%87%E6%93%8D%E4%BD%9C"><span class="toc-text">js鼠标操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Actionchains-%E9%BC%A0%E6%A0%87%E6%93%8D%E4%BD%9C"><span class="toc-text">Actionchains:鼠标操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#release%EF%BC%9A%E9%87%8A%E6%94%BE%E9%BC%A0%E6%A0%87"><span class="toc-text">release：释放鼠标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#perform%EF%BC%9A%E6%89%A7%E8%A1%8C%E5%8A%A8%E4%BD%9C"><span class="toc-text">perform：执行动作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%88%AC%E8%99%AB"><span class="toc-text">异步爬虫</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cookie%E6%B1%A0%E5%92%8CIP%E4%BB%A3%E7%90%86"><span class="toc-text">cookie池和IP代理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%90%86IP%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E9%97%B4%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E4%BB%A3%E7%90%86%EF%BC%8C%E8%AE%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%A4%E4%B8%BA%E4%B8%8D%E6%98%AF%E5%90%8C%E4%B8%80%E4%B8%AA%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9C%A8%E8%AF%B7%E6%B1%82%EF%BC%8C%E9%98%B2%E6%AD%A2%E7%9C%9F%E6%98%AF%E5%9C%B0%E5%9D%80IP%E8%A2%AB%E6%B3%84%E9%9C%B2%E3%80%82"><span class="toc-text">代理IP：客户端到服务器中间，创建多个代理，让服务器认为不是同一个客户端在请求，防止真是地址IP被泄露。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF-%E3%80%8B%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1-%E3%80%8B%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-text">客户端-》代理服务-》服务端</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%90%86IP%E4%BD%BF%E7%94%A8%E5%92%8CIP%E6%B1%A0%E6%90%AD%E5%BB%BA"><span class="toc-text">代理IP使用和IP池搭建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie%E6%B1%A0%E6%90%AD%E5%BB%BA"><span class="toc-text">cookie池搭建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie%E6%B1%A0-IP%E6%B1%A0%E5%B0%81%E8%A3%85"><span class="toc-text">cookie池+IP池封装</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E7%88%AC%E6%96%B9%E5%BC%8F%EF%BC%88%E6%9C%89%E9%9C%80%E8%A6%81%E5%86%8D%E6%89%BE%EF%BC%89"><span class="toc-text">反爬方式（有需要再找）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#selenium%E5%8F%8D%E7%88%AC"><span class="toc-text">selenium反爬</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E9%80%86%E5%90%91"><span class="toc-text">JS逆向</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%8A%A0%E5%AF%86"><span class="toc-text">参数加密</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">滑动验证码分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E8%BF%87%E7%A8%8B%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%88%86%E6%9E%90"><span class="toc-text">登陆过程接口的分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">请求参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%9C%B0%E5%9D%80"><span class="toc-text">请求地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%82%E6%95%B0data%EF%BC%9A%E6%9C%AA%E7%9F%A5%E5%86%85%E5%AE%B9"><span class="toc-text">参数data：未知内容</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Dzchen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>